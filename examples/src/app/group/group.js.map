{"version":3,"sources":["group.es6"],"names":["_mithril","require","_mithrilSlider","_common","_preloader","_github","_styler","_groupStyle","_styler2","default","add","_groupStyle2","callRight","fn","_len","arguments","length","args","Array","_key","_len2","remainingArgs","_key2","apply","undefined","concat","createPage","opts","ctrl","groupBy","currentIndex","listIndex","data","inRange","Math","abs","content","_mithril2","config","el","inited","_common2","fadeInImage","_preloader2","key","example","controller","sliderController","prop","isEditing","view","mySlider","component","_mithrilSlider2","pageData","getPageData","page","class","join","sliderControls","hasPrevious","onclick","goPrevious","map","size","setTimeout","goCurrent","hasNext","goNext","hideGithub","_github2"],"mappings":"qJAAA,IAAAA,UAAAC,QAAA,sDACAC,eAAAD,QAAA,yEACAE,QAAAF,QAAA,2DACAG,WAAAH,QAAA,0EACAI,QAAAJ,QAAA,2DACAK,QAAAL,QAAA,2DACAM,YAAAN,QAAA,iEACAO,UAAAC,QAAOC,IAAI,QAAXC,aAAAF,QAEA,IAAMG,WAAY,SAACC,IAAD,IAAA,GAAAC,MAAAC,UAAAC,OAAQC,KAARC,MAAAJ,KAAA,EAAAA,KAAA,EAAA,GAAAK,KAAA,EAAAA,KAAAL,KAAAK,OAAQF,KAARE,KAAA,GAAAJ,UAAAI,KAAA,OACd,YAAA,IAAA,GAAAC,OAAAL,UAAAC,OAAIK,cAAJH,MAAAE,OAAAE,MAAA,EAAAA,MAAAF,MAAAE,QAAID,cAAJC,OAAAP,UAAAO,MAAA,OACIT,IAAAU,MAAAC,OAAMH,cAANI,OAAwBR,SAE1BS,WAAa,SAACC,KAAMC,MACtB,GAAMC,SAAUD,KAAKC,UACfC,aAAeH,KAAKG,aACpBC,UAAYJ,KAAKI,UACjBC,KAAOL,KAAKK,KAEZC,QAAUC,KAAKC,IAAIL,aAAeC,WAAa,EAAIF,QACnDO,QAAUH,UACZ,EAAAI,UAAA5B,SAAE,qBACE,EAAA4B,UAAA5B,SAAE,UACE6B,OAAQ,SAACC,GAAIC,QACLA,QAGJC,SAAAhC,QAAOiC,YAAYH,GAAIP,UAG/B,EAAAK,UAAA5B,SAAE,OAAQsB,UAAY,GATJY,YAAAlC,WAYtB,IACJ,QAAO,EAAA4B,UAAA5B,SAAE,SAAUmC,IAAKb,WAAYK,UAGpCS,UACJA,SAAQC,WAAa,WACjB,OACIC,iBAAkBV,UAAA5B,QAAEuC,OACpBC,UAAWZ,UAAA5B,QAAEuC,MAAK,GAClBnB,QAASQ,UAAA5B,QAAEuC,KAAK,KAGxBH,QAAQK,KAAO,SAACtB,KAAMD,MAClB,GAAMoB,kBAAmBnB,KAAKmB,mBACxBlB,QAAUD,KAAKC,UACfsB,SAAWd,UAAA5B,QAAE2C,UAAFC,gBAAA5C,SACb6C,SAAUb,SAAAhC,QAAO8C,YACjBC,KAAM5C,UAAUc,WAAYE,MAC5BC,QAASA,QACTkB,iBAAkBnB,KAAKmB,iBACvBU,OAAQ,UAAW,QAAS,SAAW5B,SAAS6B,KAAK,OAEnDC,gBAAiB,EAAAtB,UAAA5B,SAAE,yCACrBsC,mBACI,EAAAV,UAAA5B,SAAE,UACEgD,MAAOV,iBAAiBa,cAAgB,UAAY,GACpDC,QAAS,WAAA,MAAMd,kBAAiBe,eACjC,aACH,EAAAzB,UAAA5B,SAAE,WACG,EAAG,EAAG,EAAG,EAAG,GAAGsD,IAAI,SAACC,MACjB,OAAO,EAAA3B,UAAA5B,SAAE,KACLoD,QAAS,WACLjC,KAAKC,QAAQmC,MACbC,WAAW,WACPlB,iBAAiBmB,aAClB,IAEPT,MAAQO,OAASnC,QAAW,WAAa,IAC1CmC,WAGX,EAAA3B,UAAA5B,SAAE,UACEgD,MAAOV,iBAAiBoB,UAAY,UAAY,GAChDN,QAAS,WAAA,MAAMd,kBAAiBqB,WACjC,SACH,KACR,QAAO,EAAA/B,UAAA5B,SAAE,OACLkD,eACAR,UACA,EAAAd,UAAA5B,SAAE,uBACFkB,KAAK0C,WAAa,MAAO,EAAAC,SAAA7D,8BAIlBoC","file":"group.js","sourcesContent":["import m from 'mithril';\nimport slider from 'mithril-slider';\nimport common from 'app/app/common';\nimport preloader from 'app/preloader/preloader';\nimport github from 'app/app/github';\nimport styler from 'app/app/styler';\nimport style from './group-style';\nstyler.add('group', style);\n\nconst callRight = (fn, ...args) =>\n    (...remainingArgs) =>\n        fn(...remainingArgs, ...args);\n\nconst createPage = (opts, ctrl) => {\n    const groupBy = ctrl.groupBy();\n    const currentIndex = opts.currentIndex;\n    const listIndex = opts.listIndex;\n    const data = opts.data;\n    // lazy loading\n    const inRange = Math.abs(currentIndex - listIndex) < 2 * groupBy;\n    const content = inRange ? [\n        m('.image-container', [\n            m('.image', {\n                config: (el, inited) => {\n                    if (inited) {\n                        return;\n                    }\n                    common.fadeInImage(el, data);\n                }\n            }),\n            m('span', listIndex + 1),\n            preloader\n        ])\n    ] : null;\n    return m('.page', {key: listIndex}, content);\n};\n\nlet example = {};\nexample.controller = () => {\n    return {\n        sliderController: m.prop(),\n        isEditing: m.prop(false),\n        groupBy: m.prop(3)\n    };\n};\nexample.view = (ctrl, opts) => {\n    const sliderController = ctrl.sliderController();\n    const groupBy = ctrl.groupBy();\n    const mySlider = m.component(slider, {\n        pageData: common.getPageData,\n        page: callRight(createPage, ctrl),\n        groupBy: groupBy,\n        sliderController: ctrl.sliderController,\n        class: ['example', 'group', 'group-' + groupBy].join(' ')\n    });\n    const sliderControls = m('.slider-controls.slider-controls-group',\n        sliderController ? [\n            m('a.prev', {\n                class: sliderController.hasPrevious() ? 'enabled' : '',\n                onclick: () => sliderController.goPrevious()\n            }, 'Previous'),\n            m('.count', [\n                [1, 2, 3, 4, 5].map((size) => {\n                    return m('a', {\n                        onclick: () => {\n                            ctrl.groupBy(size);\n                            setTimeout(() => {\n                                sliderController.goCurrent();\n                            }, 0);\n                        },\n                        class: (size === groupBy) ? 'selected' : ''\n                    }, size);\n                })\n            ]),\n            m('a.next', {\n                class: sliderController.hasNext() ? 'enabled' : '',\n                onclick: () => sliderController.goNext()\n            }, 'Next')\n        ] : null);\n    return m('div', [\n        sliderControls,\n        mySlider,\n        m('.slider-placeholder'),\n        opts.hideGithub ? null : github()\n    ]);\n};\n\nexport default example;\n"]}