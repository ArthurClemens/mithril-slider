{"version":3,"sources":["group.es6.js"],"names":["_styler2","add","_groupStyle2","callRight","fn","args","Array","_len","_key","remainingArgs","_len2","_key2","apply","undefined","concat","createPage","opts","ctrl","groupBy","currentIndex","listIndex","data","inRange","Math","abs","content","_mithril2","config","el","inited","_common2","fadeInImage","_preloader2","key","example","controller","sliderController","prop","isEditing","view","mySlider","component","_mithrilSlider2","pageData","getPageData","page","class","join","sliderControls","hasPrevious","onclick","goPrevious","map","size","setTimeout","goCurrent","hasNext","goNext","hideGithub","_github2"],"mappings":"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","file":"group.js","sourcesContent":["import m from 'mithril';\nimport slider from 'mithril-slider';\nimport common from 'app/app/common';\nimport preloader from 'app/preloader/preloader';\nimport github from 'app/app/github';\nimport styler from 'app/app/styler';\nimport style from './group-style';\nstyler.add('group', style);\n\nconst callRight = (fn, ...args) =>\n    (...remainingArgs) =>\n        fn(...remainingArgs, ...args);\n\nconst createPage = (opts, ctrl) => {\n    const groupBy = ctrl.groupBy();\n    const currentIndex = opts.currentIndex;\n    const listIndex = opts.listIndex;\n    const data = opts.data;\n    // lazy loading\n    const inRange = Math.abs(currentIndex - listIndex) < 2 * groupBy;\n    const content = inRange ? [\n        m('.image-container', [\n            m('.image', {\n                config: (el, inited) => {\n                    if (inited) {\n                        return;\n                    }\n                    common.fadeInImage(el, data);\n                }\n            }),\n            m('span', listIndex + 1),\n            preloader\n        ])\n    ] : null;\n    return m('.page', {key: listIndex}, content);\n};\n\nlet example = {};\nexample.controller = () => {\n    return {\n        sliderController: m.prop(),\n        isEditing: m.prop(false),\n        groupBy: m.prop(3)\n    };\n};\nexample.view = (ctrl, opts) => {\n    const sliderController = ctrl.sliderController();\n    const groupBy = ctrl.groupBy();\n    const mySlider = m.component(slider, {\n        pageData: common.getPageData,\n        page: callRight(createPage, ctrl),\n        groupBy: groupBy,\n        sliderController: ctrl.sliderController,\n        class: ['example', 'group', 'group-' + groupBy].join(' ')\n    });\n    const sliderControls = m('.slider-controls.slider-controls-group',\n        sliderController ? [\n            m('a.prev', {\n                class: sliderController.hasPrevious() ? 'enabled' : '',\n                onclick: () => sliderController.goPrevious()\n            }, 'Previous'),\n            m('.count', [\n                [1, 2, 3, 4, 5].map((size) => {\n                    return m('a', {\n                        onclick: () => {\n                            ctrl.groupBy(size);\n                            setTimeout(() => {\n                                sliderController.goCurrent();\n                            }, 0);\n                        },\n                        class: (size === groupBy) ? 'selected' : ''\n                    }, size);\n                })\n            ]),\n            m('a.next', {\n                class: sliderController.hasNext() ? 'enabled' : '',\n                onclick: () => sliderController.goNext()\n            }, 'Next')\n        ] : null);\n    return m('div', [\n        sliderControls,\n        mySlider,\n        m('.slider-placeholder'),\n        opts.hideGithub ? null : github()\n    ]);\n};\n\nexport default example;\n"]}