{"version":3,"sources":["common.es6.js"],"names":["DATA_URL","vm","seen","getPageData","url","arguments","length","undefined","_mithril2","request","method","background","fadeInImage","el","callback","showImage","style","backgroundImage","opacity","setTimeout","img","Image","onload","src"],"mappings":"mOAEMA,SAAW,uBAEXC,IACFC,6BAIAC,YAAa,cAACC,KAAAC,UAAAC,QAAA,GAAAC,SAAAF,UAAA,GAAML,SAAAK,UAAA,EAChB,OAAOG,WAAAA,WAAEC,SACLC,OAAQ,MACRN,IAAKA,IACLO,YAAY,KAIpBC,YAAa,SAACC,GAAIT,IAAKU,UACnB,GAAMC,WAAY,WACdF,GAAGG,MAAMC,gBAAkB,OAASb,IAAM,IAC1CS,GAAGG,MAAME,QAAU,EACnBjB,GAAGC,KAAKE,KAAO,EACXU,UACAK,WAAW,WACPL,YACD,KAGX,IAAKb,GAAGC,KAAKE,KAOTW,gBAPe,CACf,GAAIK,KAAM,GAAIC,MACdD,KAAIE,OAAS,WACTP,aAEJK,IAAIG,IAAMnB;;;;;;;;;;;;AA/BtB,IAAM,WAAW,sBAAX;;AAEN,IAAM,KAAK;AACP,UAAM,EAAN;CADE;;kBAIS;AACX,iBAAa,uBAAoB;YAAnB,4DAAM,wBAAa;;AAC7B,eAAO,kBAAE,OAAF,CAAU;AACb,oBAAQ,KAAR;AACA,iBAAK,GAAL;AACA,wBAAY,KAAZ;SAHG,CAAP,CAD6B;KAApB;;AAQb,iBAAa,qBAAC,EAAD,EAAK,GAAL,EAAU,QAAV,EAAuB;AAChC,YAAM,YAAY,SAAZ,SAAY,GAAM;AACpB,eAAG,KAAH,CAAS,eAAT,GAA2B,SAAS,GAAT,GAAe,GAAf,CADP;AAEpB,eAAG,KAAH,CAAS,OAAT,GAAmB,CAAnB,CAFoB;AAGpB,eAAG,IAAH,CAAQ,GAAR,IAAe,CAAf,CAHoB;AAIpB,gBAAI,QAAJ,EAAc;AACV,2BAAW,YAAM;AACb,+BADa;iBAAN,EAER,GAFH,EADU;aAAd;SAJc,CADc;AAWhC,YAAI,CAAC,GAAG,IAAH,CAAQ,GAAR,CAAD,EAAe;AACf,gBAAI,MAAM,IAAI,KAAJ,EAAN,CADW;AAEf,gBAAI,MAAJ,GAAa,YAAM;AACf,4BADe;aAAN,CAFE;AAKf,gBAAI,GAAJ,GAAU,GAAV,CALe;SAAnB,MAMO;AACH,wBADG;SANP;KAXS","file":"common.js","sourcesContent":["import m from 'mithril';\n\nconst DATA_URL = 'app/data/server.json';\n\nconst vm = {\n    seen: {}\n};\n\nexport default {\n    getPageData: (url = DATA_URL) => {\n        return m.request({\n            method: 'GET',\n            url: url,\n            background: false\n        });\n    },\n\n    fadeInImage: (el, url, callback) => {\n        const showImage = () => {\n            el.style.backgroundImage = 'url(' + url + ')';\n            el.style.opacity = 1;\n            vm.seen[url] = 1;\n            if (callback) {\n                setTimeout(() => {\n                    callback();\n                }, 500);\n            }\n        };\n        if (!vm.seen[url]) {\n            let img = new Image();\n            img.onload = () => {\n                showImage();\n            };\n            img.src = url;\n        } else {\n            showImage();\n        }\n    }\n};\n"]}