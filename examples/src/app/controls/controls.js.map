{"version":3,"sources":["controls.es6.js"],"names":["_styler2","add","_controlsStyle2","callRight","fn","args","Array","_len","_key","remainingArgs","_len2","_key2","apply","undefined","concat","createPage","opts","currentIndex","listIndex","data","inRange","Math","abs","content","_mithril2","config","el","inited","_common2","fadeInImage","_preloader2","key","example","controller","sliderController","prop","isEditing","view","ctrl","arguments","length","rtl","mySlider","component","_mithrilSlider2","pageData","getPageData","page","class","sliderControls","value","index","oninput","e","idx","parseInt","target","isNaN","goTo","hasPrevious","onclick","goPrevious","hasNext","goNext","props","dir","hideGithub","_github2"],"mappings":"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","file":"controls.js","sourcesContent":["import m from 'mithril';\nimport slider from 'mithril-slider';\nimport common from 'app/app/common';\nimport preloader from 'app/preloader/preloader';\nimport github from 'app/app/github';\nimport styler from 'app/app/styler';\nimport style from './controls-style';\nstyler.add('controls', style);\n\nconst callRight = (fn, ...args) =>\n    (...remainingArgs) =>\n        fn(...remainingArgs, ...args);\n\nconst createPage = (opts) => {\n    const currentIndex = opts.currentIndex;\n    const listIndex = opts.listIndex;\n    const data = opts.data;\n    // lazy loading\n    const inRange = Math.abs(currentIndex - listIndex) < 2;\n    const content = inRange ? m('.image-container', [\n        m('.image', {\n            config: (el, inited) => {\n                if (inited) {\n                    return;\n                }\n                common.fadeInImage(el, data);\n            }\n        }),\n        preloader\n    ]) : null;\n    return m('.page', {key: listIndex}, content);\n};\n\nlet example = {};\nexample.controller = () => {\n    return {\n        sliderController: m.prop(),\n        isEditing: m.prop(false) // allow value change when typing\n    };\n};\nexample.view = (ctrl, opts = {}) => {\n    const rtl = opts.rtl;\n    const sliderController = ctrl.sliderController();\n    const mySlider = m.component(slider, {\n        pageData: callRight(common.getPageData, 'app/data/local.json'),\n        page: createPage,\n        sliderController: ctrl.sliderController,\n        class: 'example controls',\n        rtl: rtl\n    });\n    const sliderControls = sliderController ? m('.slider-controls.slider-controls-controls', [\n        m('input.goto', {\n            value: ctrl.isEditing() ? '' : sliderController.index() + 1,\n            oninput: (e) => {\n                ctrl.isEditing(true);\n                const idx = parseInt(e.target.value, 10) - 1;\n                if (!isNaN(idx)) {\n                    sliderController.goTo(idx, 0);\n                    ctrl.isEditing(false);\n                }\n            }\n        }),\n        m('a.prev', {\n            class: sliderController.hasPrevious() ? 'enabled' : '',\n            onclick: () => sliderController.goPrevious()\n        }, 'Previous'),\n        m('a.next', {\n            class: sliderController.hasNext() ? 'enabled' : '',\n            onclick: () => sliderController.goNext()\n        }, 'Next')\n    ]) : null;\n    const props = rtl ? {dir: 'rtl'} : {};\n    return m('div', props, [\n        mySlider,\n        m('.slider-placeholder'),\n        sliderControls,\n        opts.hideGithub ? null : github()\n    ]);\n};\n\nexport default example;\n"]}