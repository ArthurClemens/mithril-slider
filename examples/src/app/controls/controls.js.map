{"version":3,"sources":["controls.es6"],"names":["_mithril","require","_mithrilSlider","_common","_preloader","_github","_styler","_controlsStyle","_styler2","default","add","_controlsStyle2","callRight","fn","_len","arguments","length","args","Array","_key","_len2","remainingArgs","_key2","apply","undefined","concat","createPage","opts","currentIndex","listIndex","data","inRange","Math","abs","content","_mithril2","config","el","inited","_common2","fadeInImage","_preloader2","key","example","controller","sliderController","prop","isEditing","view","ctrl","rtl","mySlider","component","_mithrilSlider2","pageData","getPageData","page","class","sliderControls","value","index","oninput","e","idx","parseInt","target","isNaN","goTo","hasPrevious","onclick","goPrevious","hasNext","goNext","props","dir","hideGithub","_github2"],"mappings":"qJAAA,IAAAA,UAAAC,QAAA,sDACAC,eAAAD,QAAA,yEACAE,QAAAF,QAAA,2DACAG,WAAAH,QAAA,0EACAI,QAAAJ,QAAA,2DACAK,QAAAL,QAAA,2DACAM,eAAAN,QAAA,0EACAO,UAAAC,QAAOC,IAAI,WAAXC,gBAAAF,QAEA,IAAMG,WAAY,SAACC,IAAD,IAAA,GAAAC,MAAAC,UAAAC,OAAQC,KAARC,MAAAJ,KAAA,EAAAA,KAAA,EAAA,GAAAK,KAAA,EAAAA,KAAAL,KAAAK,OAAQF,KAARE,KAAA,GAAAJ,UAAAI,KAAA,OACd,YAAA,IAAA,GAAAC,OAAAL,UAAAC,OAAIK,cAAJH,MAAAE,OAAAE,MAAA,EAAAA,MAAAF,MAAAE,QAAID,cAAJC,OAAAP,UAAAO,MAAA,OACIT,IAAAU,MAAAC,OAAMH,cAANI,OAAwBR,SAE1BS,WAAa,SAACC,MAChB,GAAMC,cAAeD,KAAKC,aACpBC,UAAYF,KAAKE,UACjBC,KAAOH,KAAKG,KAEZC,QAAUC,KAAKC,IAAIL,aAAeC,WAAa,EAC/CK,QAAUH,SAAU,EAAAI,UAAA1B,SAAE,qBACxB,EAAA0B,UAAA1B,SAAE,UACE2B,OAAQ,SAACC,GAAIC,QACLA,QAGJC,SAAA9B,QAAO+B,YAAYH,GAAIP,SANaW,YAAAhC,UAU3C,IACL,QAAO,EAAA0B,UAAA1B,SAAE,SAAUiC,IAAKb,WAAYK,UAGpCS,UACJA,SAAQC,WAAa,WACjB,OACIC,iBAAkBV,UAAA1B,QAAEqC,OACpBC,UAAWZ,UAAA1B,QAAEqC,MAAK,KAG1BH,QAAQK,KAAO,SAACC,MAAoB,GAAdtB,MAAcZ,UAAAC,QAAA,GAAAQ,SAAAT,UAAA,MAAAA,UAAA,GAC1BmC,IAAMvB,KAAKuB,IACXL,iBAAmBI,KAAKJ,mBACxBM,SAAWhB,UAAA1B,QAAE2C,UAAFC,gBAAA5C,SACb6C,SAAU1C,UAAU2B,SAAA9B,QAAO8C,YAAa,uBACxCC,KAAM9B,WACNmB,iBAAkBI,KAAKJ,iBACvBY,MAAO,mBACPP,IAAKA,MAEHQ,eAAiBb,kBAAmB,EAAAV,UAAA1B,SAAE,8CACxC,EAAA0B,UAAA1B,SAAE,cACEkD,MAAOV,KAAKF,YAAc,GAAKF,iBAAiBe,QAAU,EAC1DC,QAAS,SAACC,GACNb,KAAKF,WAAU,EACf,IAAMgB,KAAMC,SAASF,EAAEG,OAAON,MAAO,IAAM,CACtCO,OAAMH,OACPlB,iBAAiBsB,KAAKJ,IAAK,GAC3Bd,KAAKF,WAAU,QAI3B,EAAAZ,UAAA1B,SAAE,UACEgD,MAAOZ,iBAAiBuB,cAAgB,UAAY,GACpDC,QAAS,WAAA,MAAMxB,kBAAiByB,eACjC,aACH,EAAAnC,UAAA1B,SAAE,UACEgD,MAAOZ,iBAAiB0B,UAAY,UAAY,GAChDF,QAAS,WAAA,MAAMxB,kBAAiB2B,WACjC,UACF,KACCC,MAAQvB,KAAOwB,IAAK,SAC1B,QAAO,EAAAvC,UAAA1B,SAAE,MAAOgE,OACZtB,UACA,EAAAhB,UAAA1B,SAAE,uBACFiD,eACA/B,KAAKgD,WAAa,MAAO,EAAAC,SAAAnE,8BAIlBkC","file":"controls.js","sourcesContent":["import m from 'mithril';\nimport slider from 'mithril-slider';\nimport common from 'app/app/common';\nimport preloader from 'app/preloader/preloader';\nimport github from 'app/app/github';\nimport styler from 'app/app/styler';\nimport style from './controls-style';\nstyler.add('controls', style);\n\nconst callRight = (fn, ...args) =>\n    (...remainingArgs) =>\n        fn(...remainingArgs, ...args);\n\nconst createPage = (opts) => {\n    const currentIndex = opts.currentIndex;\n    const listIndex = opts.listIndex;\n    const data = opts.data;\n    // lazy loading\n    const inRange = Math.abs(currentIndex - listIndex) < 2;\n    const content = inRange ? m('.image-container', [\n        m('.image', {\n            config: (el, inited) => {\n                if (inited) {\n                    return;\n                }\n                common.fadeInImage(el, data);\n            }\n        }),\n        preloader\n    ]) : null;\n    return m('.page', {key: listIndex}, content);\n};\n\nlet example = {};\nexample.controller = () => {\n    return {\n        sliderController: m.prop(),\n        isEditing: m.prop(false) // allow value change when typing\n    };\n};\nexample.view = (ctrl, opts = {}) => {\n    const rtl = opts.rtl;\n    const sliderController = ctrl.sliderController();\n    const mySlider = m.component(slider, {\n        pageData: callRight(common.getPageData, 'app/data/local.json'),\n        page: createPage,\n        sliderController: ctrl.sliderController,\n        class: 'example controls',\n        rtl: rtl\n    });\n    const sliderControls = sliderController ? m('.slider-controls.slider-controls-controls', [\n        m('input.goto', {\n            value: ctrl.isEditing() ? '' : sliderController.index() + 1,\n            oninput: (e) => {\n                ctrl.isEditing(true);\n                const idx = parseInt(e.target.value, 10) - 1;\n                if (!isNaN(idx)) {\n                    sliderController.goTo(idx, 0);\n                    ctrl.isEditing(false);\n                }\n            }\n        }),\n        m('a.prev', {\n            class: sliderController.hasPrevious() ? 'enabled' : '',\n            onclick: () => sliderController.goPrevious()\n        }, 'Previous'),\n        m('a.next', {\n            class: sliderController.hasNext() ? 'enabled' : '',\n            onclick: () => sliderController.goNext()\n        }, 'Next')\n    ]) : null;\n    const props = rtl ? {dir: 'rtl'} : {};\n    return m('div', props, [\n        mySlider,\n        m('.slider-placeholder'),\n        sliderControls,\n        opts.hideGithub ? null : github()\n    ]);\n};\n\nexport default example;\n"]}