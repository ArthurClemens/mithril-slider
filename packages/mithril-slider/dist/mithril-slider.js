!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("hammerjs"),require("mithril")):"function"==typeof define&&define.amd?define(["exports","hammerjs","mithril"],e):e(t["mithril-slider"]={},null,t.m)}(this,function(t,e,n){"use strict";n=n&&n.hasOwnProperty("default")?n.default:n;var r=function(t){var e=t;return function(t){if(void 0===t)return e;e=t}},o={slider:"mithril-slider",content:"mithril-slider__content",before:"mithril-slider__before",after:"mithril-slider__after"},i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a={oninit:function(t){var e=t.attrs,o=r([]);e.pageData&&e.pageData().then(function(t){return m(t)});var a=parseInt(e.duration,10)||160,l=r(e.index||-1),d=void 0,u=0,s=r(e.groupBy||1),f=e.cancelDragFactor||.2,c="vertical"===e.orientation,h=e.rtl?-1:1,v=e.pageOffsetX||0,g=e.pageOffsetY||0,m=function(t){o(t),n.redraw()},p=function(t,e){return t.childNodes[e]},y=function(t,e){var n=t.style;n.transform=n["-webkit-transform"]=n["-moz-transform"]=n["-ms-transform"]=function(t){return"translate3d("+[c?"0":t+"px",c?t+"px":"0","0"].join(", ")+")"}(e)},x=function(t){d.style["-webkit-transition-duration"]=d.style["transition-duration"]=t+"ms"},C=function(t,r){t<0||t>o().length-1||(D(d),void 0!==r&&x(r),y(d,-h*t*u),function(t){if(l()!==t&&(l(t),n.redraw(),e.getState)){var r=p(d,l());e.getState({index:t,hasNext:O(),hasPrevious:I(),pageEl:r})}}(t))},b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=l(),n=s(),r=o().length,i=e+t*n;return i+n>r?r-n:i<0?0:i},D=function(t){var e=c?"height":"width",n=t.childNodes[0];n.getBoundingClientRect()[e]&&(u=n.getBoundingClientRect()[e],t.style[e]=o().length*u+"px")},E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;D(d),x(t),C(b())},_=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;return x(t),l()<o().length?C(b(1)):C(b())},w=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;return x(t),l()>0?C(b(-1)):C(b())},O=function(){return l()+s()<o().length},I=function(){return l()>0};i(t.state,{list:o,contentEl:d,setContentEl:function(t){d=t,D(t),E()},handleDrag:function(t){var e=d,n=p(e,l()),r=c?t.deltaY+g:t.deltaX+v,o=c?n.offsetTop:-1===h?n.offsetLeft-n.parentNode.clientWidth+n.clientWidth:n.offsetLeft;y(e,r-o),t.preventDefault()},handleDragStart:function(){return D(d),x(0)},handleDragEnd:function(t){var e=function(t){var e=p(d,l()).clientWidth,n=1/(Math.abs(t)||1)*e;return n>a&&(n=a),n}(t.velocity),n=c?t.deltaY:t.deltaX;Math.abs(n)>u*s()*f?h*n<0?_(e):w(e):E(e)},groupBy:s,updateContentSize:D,index:l,hasNext:O,hasPrevious:I,goTo:C,goCurrent:E,goNext:_,goPrevious:w})},view:function(t){var e=t.state,r=t.attrs;r.sliderController&&r.sliderController(e);var i=e.index();e.groupBy(r.groupBy||1);var a=e.contentEl;return a&&e.updateContentSize(a),n("div",{class:[o.slider,r.class||""].join(" ")},[r.before?n("."+o.before,r.before):null,n("div",{class:o.content,onupdate:function(t){var n=t.dom;e.inited||n.childNodes.length>0&&(e.setContentEl(n),e.updateContentSize(n),e.touch=new function(t){var e=t.el,n=t.orientation,r=t.onStart,o=t.onMove,i=t.onEnd,a=new Hammer.Manager(e,{});return a.add(new Hammer.Pan({direction:"vertical"===n?Hammer.DIRECTION_VERTICAL:"all"===n?Hammer.DIRECTION_ALL:Hammer.DIRECTION_HORIZONTAL,threshold:0})),a.on("panstart",r),a.on("panmove",o),a.on("panend",i),{destroy:function(){a.off("panstart",r),a.off("panmove",o),a.off("panend",i)}}}({el:n,orientation:r.orientation,onStart:e.handleDragStart,onMove:e.handleDrag,onEnd:e.handleDragEnd}),e.inited=!0)},onremove:function(){return e.touch&&e.touch.destroy()}},e.list().map(function(t,e){return r.page({data:t,listIndex:e,currentIndex:i})})),r.after?n("."+o.after,r.after):null])}};t.slider=a,t.css=[{".mithril-slider":{overflow:"hidden"," .mithril-slider__content":{transitionProperty:"transform",transitionTimingFunction:"ease-out",transform:"translate3d(0, 0, 0)"}}}],Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=mithril-slider.js.map
