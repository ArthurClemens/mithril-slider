!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("mithril"),require("hammerjs")):"function"==typeof define&&define.amd?define(["exports","mithril","hammerjs"],e):e(t["mithril-slider"]=t["mithril-slider"]||{},t.m)}(this,function(t,e){"use strict";e="default"in e?e.default:e;var n=function(t){var e=t;return function(t){if(void 0===t)return e;e=t}},r=function(t){var e=t.el,n=t.orientation,r=t.onStart,i=t.onMove,o=t.onEnd,a=new Hammer.Manager(e,{});return a.add(new Hammer.Pan({direction:"vertical"===n?Hammer.DIRECTION_VERTICAL:"all"===n?Hammer.DIRECTION_ALL:Hammer.DIRECTION_HORIZONTAL,threshold:0})),a.on("panstart",r),a.on("panmove",i),a.on("panend",o),{destroy:function(){a.off("panstart",r),a.off("panmove",i),a.off("panend",o)}}},i={slider:"mithril-slider",content:"mithril-slider__content",before:"mithril-slider__before",after:"mithril-slider__after"},o={oninit:function(t){var r=t.attrs,i=n([]);r.pageData&&r.pageData().then(function(t){return m(t)});var o=parseInt(r.duration,10)||160,a=n(r.index||-1),l=void 0,d=0,u=n(r.groupBy||1),s=r.cancelDragFactor||.2,f="vertical"===r.orientation,c=r.rtl?-1:1,h=r.pageOffsetX||0,v=r.pageOffsetY||0,m=function(t){i(t),e.redraw()},g=function(t){if(a()!==t&&(a(t),e.redraw(),r.getState)){var n=p(l,a());r.getState({index:t,hasNext:w(),hasPrevious:S(),pageEl:n})}},p=function(t,e){return t.childNodes[e]},y=function(t){return"translate3d("+[f?"0":t+"px",f?t+"px":"0","0"].join(", ")+")"},x=function(t,e){var n=t.style;n.transform=n["-webkit-transform"]=n["-moz-transform"]=n["-ms-transform"]=y(e)},C=function(t){l.style["-webkit-transition-duration"]=l.style["transition-duration"]=t+"ms"},D=function(t,e){t<0||t>i().length-1||(_(l),void 0!==e&&C(e),x(l,-c*t*d),g(t))},E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=a(),n=u(),r=i().length,o=e+t*n;return o+n>r?r-n:o<0?0:o},_=function(t){var e=f?"height":"width",n=t.childNodes[0];n.getBoundingClientRect()[e]&&(d=n.getBoundingClientRect()[e],t.style[e]=i().length*d+"px")},b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;_(l),C(t),D(E())},I=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return C(t),D(a()<i().length?E(1):E())},N=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return C(t),D(a()>0?E(-1):E())},w=function(){return a()+u()<i().length},S=function(){return a()>0},O=function(t){l=t,_(t),b()},T=function(){return _(l),C(0)},R=function(t){var e=l,n=p(e,a()),r=f?t.deltaY+v:t.deltaX+h,i=f?n.offsetTop:-1===c?n.offsetLeft-n.parentNode.clientWidth+n.clientWidth:n.offsetLeft;x(e,r-i),t.preventDefault()},j=function(t){var e=p(l,a()).clientWidth,n=1/(Math.abs(t)||1)*e;return n>o&&(n=o),n},B=function(t){var e=j(t.velocity),n=f?t.deltaY:t.deltaX;Math.abs(n)>d*u()*s?c*n<0?I(e):N(e):b(e)};t.state={list:i,contentEl:l,setContentEl:O,handleDrag:R,handleDragStart:T,handleDragEnd:B,groupBy:u,updateContentSize:_,index:a,hasNext:w,hasPrevious:S,goTo:D,goCurrent:b,goNext:I,goPrevious:N}},view:function(t){var n=t.state,o=t.attrs;o.sliderController&&o.sliderController(n);var a=n.index();n.groupBy(o.groupBy||1);var l=n.contentEl;return l&&n.updateContentSize(l),e("div",{class:[i.slider,o.class||""].join(" ")},[o.before?e("."+i.before,o.before):null,e("div",{class:i.content,onupdate:function(t){var e=t.dom;n.inited||e.childNodes.length>0&&(n.setContentEl(e),n.updateContentSize(e),n.touch=new r({el:e,orientation:o.orientation,onStart:n.handleDragStart,onMove:n.handleDrag,onEnd:n.handleDragEnd}),n.inited=!0)},onremove:function(){return n.touch&&n.touch.destroy()}},n.list().map(function(t,e){return o.page({data:t,listIndex:e,currentIndex:a})})),o.after?e("."+i.after,o.after):null])}},a=[{".mithril-slider":{overflow:"hidden"," .mithril-slider__content":{transitionProperty:"transform",transitionTimingFunction:"ease-out",transform:"translate3d(0, 0, 0)"}}}];t.slider=o,t.css=a,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=mithril-slider.js.map
