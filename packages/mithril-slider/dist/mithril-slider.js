!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("mithril"),require("hammerjs")):"function"==typeof define&&define.amd?define(["exports","mithril","hammerjs"],e):e(t["mithril-slider"]=t["mithril-slider"]||{},t.m,t.hammerjs)}(this,function(t,e,n){"use strict";e="default"in e?e.default:e,n="default"in n?n.default:n;var r=function(t){var e=t;return function(t){return void 0===t?e:void(e=t)}},i=function(t){var e=t.el,r=t.orientation,i=t.onStart,o=t.onMove,a=t.onEnd,l=new n.Manager(e,{});return l.add(new n.Pan({direction:"vertical"===r?n.DIRECTION_VERTICAL:"all"===r?n.DIRECTION_ALL:n.DIRECTION_HORIZONTAL,threshold:0})),l.on("panstart",i),l.on("panmove",o),l.on("panend",a),{destroy:function(){l.off("panstart",i),l.off("panmove",o),l.off("panend",a)}}},o={slider:"mithril-slider",content:"mithril-slider__content",before:"mithril-slider__before",after:"mithril-slider__after"},a=160,l=.2,d=1,u="vertical",s=1,f=0,c=0,h=function(t){var n=t.state,r=t.attrs;r.sliderController&&r.sliderController(n);var a=n.index();n.groupBy(r.groupBy||1);var l=n.contentEl;return l&&n.updateContentSize(l),e("div",{class:[o.slider,r.class||""].join(" ")},[r.before?e("."+o.before,r.before):null,e("div",{class:o.content,onupdate:function(t){var e=t.dom;n.inited||e.childNodes.length>0&&(n.setContentEl(e),n.updateContentSize(e),n.touch=new i({el:e,orientation:r.orientation,onStart:n.handleDragStart,onMove:n.handleDrag,onEnd:n.handleDragEnd}),n.inited=!0)},onremove:function(){return n.touch&&n.touch.destroy()}},n.list().map(function(t,e){return r.page({data:t,listIndex:e,currentIndex:a})})),r.after?e("."+o.after,r.after):null])},v=function(t){var n=t.attrs,i=r([]);n.pageData&&n.pageData().then(function(t){return E(t)});var o=parseInt(n.duration,10)||a,h=r(n.index||-1),v=void 0,g=0,p=r(n.groupBy||d),m=n.cancelDragFactor||l,y=n.orientation===u,x=n.rtl?-1:s,C=n.pageOffsetX||f,D=n.pageOffsetY||c,E=function(t){i(t),e.redraw()},_=function(t){var r=h();if(r!==t&&(h(t),e.redraw(),n.getState)){var i=v,o=b(i,h());n.getState({index:t,hasNext:L(),hasPrevious:M(),pageEl:o})}},b=function(t,e){return t.childNodes[e]},I=function(t){var e=y?"0":t+"px",n=y?t+"px":"0",r="0",i=[e,n,r].join(", ");return"translate3d("+i+")"},N=function(t,e){var n=t.style;n.transform=n["-webkit-transform"]=n["-moz-transform"]=n["-ms-transform"]=I(e)},w=function(t){v.style["-webkit-transition-duration"]=v.style["transition-duration"]=t+"ms"},S=function(t,e){t<0||t>i().length-1||(T(v),void 0!==e&&w(e),N(v,-x*t*g),_(t))},O=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=h(),n=p(),r=0,o=i().length,a=e+t*n;return a+n>o?o-n:a<r?r:a},T=function(t){var e=y?"height":"width",n=t.childNodes[0];n.getBoundingClientRect()[e]&&(g=n.getBoundingClientRect()[e],t.style[e]=i().length*g+"px")},j=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;T(v),w(t),S(O())},R=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return w(t),S(h()<i().length?O(1):O())},B=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return w(t),S(h()>0?O(-1):O())},L=function(){return h()+p()<i().length},M=function(){return h()>0},P=function(t){v=t,T(t),j()},z=function(){return T(v),w(0)},A=function(t){var e=v,n=b(e,h()),r=y?t.deltaY+D:t.deltaX+C,i=y?n.offsetTop:x===-1?n.offsetLeft-n.parentNode.clientWidth+n.clientWidth:n.offsetLeft;N(e,r-i),t.preventDefault()},W=function(t){var e=v,n=b(e,h()),r=n.clientWidth,i=Math.abs(t)||1,a=1/i*r;return a>o&&(a=o),a},X=function(t){var e=W(t.velocity),n=y?t.deltaY:t.deltaX;Math.abs(n)>g*p()*m?x*n<0?R(e):B(e):j(e)};t.state={list:i,contentEl:v,setContentEl:P,handleDrag:A,handleDragStart:z,handleDragEnd:X,groupBy:p,updateContentSize:T,index:h,hasNext:L,hasPrevious:M,goTo:S,goCurrent:j,goNext:R,goPrevious:B}},g={oninit:v,view:h},p=[{".mithril-slider":{overflow:"hidden"," .mithril-slider__content":{transitionProperty:"transform",transitionTimingFunction:"ease-out",transform:"translate3d(0, 0, 0)"}}}];t.slider=g,t.css=p,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=mithril-slider.js.map
