!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).mithrilSlider=t.mithrilSlider||{})}(this,function(t){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e,n,i,r,o){return{tag:t,key:e,attrs:n,children:i,text:r,dom:o,domSize:void 0,state:void 0,events:void 0,instance:void 0}}n.normalize=function(t){return Array.isArray(t)?n("[",void 0,void 0,n.normalizeChildren(t),void 0,void 0):null!=t&&"object"!==e(t)?n("#",void 0,void 0,!1===t?"":t,void 0,void 0):t},n.normalizeChildren=function(t){for(var e=[],i=0;i<t.length;i++)e[i]=n.normalize(t[i]);return e};var i=function(){var t,i=arguments[this],r=this+1;if(null==i?i={}:("object"!==e(i)||null!=i.tag||Array.isArray(i))&&(i={},r=this),arguments.length===r+1)t=arguments[r],Array.isArray(t)||(t=[t]);else for(t=[];r<arguments.length;)t.push(arguments[r++]);return n("",i.key,i,t)},r=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,o={},s={}.hasOwnProperty;function a(t){for(var e in t)if(s.call(t,e))return!1;return!0}function l(t){if(null==t||"string"!=typeof t&&"function"!=typeof t&&"function"!=typeof t.view)throw Error("The selector must be either a string or a component.");var e=i.apply(1,arguments);return"string"==typeof t&&(e.children=n.normalizeChildren(e.children),"["!==t)?function(t,e){var i=e.attrs,r=n.normalizeChildren(e.children),o=s.call(i,"class"),l=o?i.class:i.className;if(e.tag=t.tag,e.attrs=null,e.children=void 0,!a(t.attrs)&&!a(i)){var u={};for(var c in i)s.call(i,c)&&(u[c]=i[c]);i=u}for(var c in t.attrs)s.call(t.attrs,c)&&"className"!==c&&!s.call(i,c)&&(i[c]=t.attrs[c]);for(var c in null==l&&null==t.attrs.className||(i.className=null!=l?null!=t.attrs.className?String(t.attrs.className)+" "+String(l):l:null!=t.attrs.className?t.attrs.className:null),o&&(i.class=null),i)if(s.call(i,c)&&"key"!==c){e.attrs=i;break}return Array.isArray(r)&&1===r.length&&null!=r[0]&&"#"===r[0].tag?e.text=r[0].children:e.children=r,e}(o[t]||function(t){for(var e,n="div",i=[],s={};e=r.exec(t);){var a=e[1],l=e[2];if(""===a&&""!==l)n=l;else if("#"===a)s.id=l;else if("."===a)i.push(l);else if("["===e[3][0]){var u=e[6];u&&(u=u.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),"class"===e[4]?i.push(u):s[e[4]]=""===u?u:u||!0}}return i.length>0&&(s.className=i.join(" ")),o[t]={tag:n,attrs:s}}(t),e):(e.tag=t,e)}l.trust=function(t){return null==t&&(t=""),n("<",void 0,void 0,t,void 0,void 0)},l.fragment=function(){var t=i.apply(0,arguments);return t.tag="[",t.children=n.normalizeChildren(t.children),t};var u=function(){return l.apply(this,arguments)};if(u.m=l,u.trust=l.trust,u.fragment=l.fragment,(c=function(t){if(!(this instanceof c))throw new Error("Promise must be called with `new`");if("function"!=typeof t)throw new TypeError("executor must be a function");var n=this,i=[],r=[],o=u(i,!0),s=u(r,!1),a=n._instance={resolvers:i,rejectors:r},l="function"==typeof setImmediate?setImmediate:setTimeout;function u(t,o){return function u(c){var h;try{if(!o||null==c||"object"!==e(c)&&"function"!=typeof c||"function"!=typeof(h=c.then))l(function(){o||0!==t.length||console.error("Possible unhandled promise rejection:",c);for(var e=0;e<t.length;e++)t[e](c);i.length=0,r.length=0,a.state=o,a.retry=function(){u(c)}});else{if(c===n)throw new TypeError("Promise can't be resolved w/ itself");f(h.bind(c))}}catch(t){s(t)}}}function f(t){var e=0;function n(t){return function(n){e++>0||t(n)}}var i=n(s);try{t(n(o),i)}catch(t){i(t)}}f(t)}).prototype.then=function(t,e){var n,i,r=this._instance;function o(t,e,o,s){e.push(function(e){if("function"!=typeof t)o(e);else try{n(t(e))}catch(t){i&&i(t)}}),"function"==typeof r.retry&&s===r.state&&r.retry()}var s=new c(function(t,e){n=t,i=e});return o(t,r.resolvers,n,!0),o(e,r.rejectors,i,!1),s},c.prototype.catch=function(t){return this.then(null,t)},c.prototype.finally=function(t){return this.then(function(e){return c.resolve(t()).then(function(){return e})},function(e){return c.resolve(t()).then(function(){return c.reject(e)})})},c.resolve=function(t){return t instanceof c?t:new c(function(e){e(t)})},c.reject=function(t){return new c(function(e,n){n(t)})},c.all=function(t){return new c(function(n,i){var r=t.length,o=0,s=[];if(0===t.length)n([]);else for(var a=0;a<t.length;a++)!function(a){function l(t){o++,s[a]=t,o===r&&n(s)}null==t[a]||"object"!==e(t[a])&&"function"!=typeof t[a]||"function"!=typeof t[a].then?l(t[a]):t[a].then(l,i)}(a)})},c.race=function(t){return new c(function(e,n){for(var i=0;i<t.length;i++)t[i].then(e,n)})},"undefined"!=typeof window){void 0===window.Promise?window.Promise=c:window.Promise.prototype.finally||(window.Promise.prototype.finally=c.prototype.finally);var c=window.Promise}else if("undefined"!=typeof global){void 0===global.Promise?global.Promise=c:global.Promise.prototype.finally||(global.Promise.prototype.finally=c.prototype.finally);c=global.Promise}var f=function(t){if("[object Object]"!==Object.prototype.toString.call(t))return"";var e=[];for(var n in t)i(n,t[n]);return e.join("&");function i(t,n){if(Array.isArray(n))for(var r=0;r<n.length;r++)i(t+"["+r+"]",n[r]);else if("[object Object]"===Object.prototype.toString.call(n))for(var r in n)i(t+"["+r+"]",n[r]);else e.push(encodeURIComponent(t)+(null!=n&&""!==n?"="+encodeURIComponent(n):""))}},h=function(t,e){var n,i=0;function r(t){return function(i,r){"string"!=typeof i?(r=i,i=i.url):null==r&&(r={});var o=new e(function(e,n){t(i,r,function(t){if("function"==typeof r.type)if(Array.isArray(t))for(var n=0;n<t.length;n++)t[n]=new r.type(t[n]);else t=new r.type(t);e(t)},n)});if(!0===r.background)return o;var s=0;function a(){0==--s&&"function"==typeof n&&n()}return function t(e){var n=e.then;return e.then=function(){s++;var i=n.apply(e,arguments);return i.then(a,function(t){if(a(),0===s)throw t}),t(i)},e}(o)}}function o(t,e){for(var n in t.headers)if({}.hasOwnProperty.call(t.headers,n)&&e.test(n))return!0;return!1}function s(t,e,n){if(null==e)return t;if(t=t.replace(/:([^\/]+)/gi,function(t,n){return null!=e[n]?e[n]:t}),n&&null!=e){var i=f(e);i&&(t+=(t.indexOf("?")<0?"?":"&")+i)}return t}return{request:r(function(e,n,i,r){var a=null!=n.method?n.method.toUpperCase():"GET",l="GET"!==a&&"TRACE"!==a&&("boolean"!=typeof n.useBody||n.useBody),u=n.data,c=!(null!=n.serialize&&n.serialize!==JSON.serialize||u instanceof t.FormData);l&&("function"==typeof n.serialize?u=n.serialize(u):u instanceof t.FormData||(u=JSON.stringify(u)));var f=new t.XMLHttpRequest,h=!1,d=f.abort;for(var p in f.abort=function(){h=!0,d.call(f)},f.open(a,s(e,n.data,!l),"boolean"!=typeof n.async||n.async,"string"==typeof n.user?n.user:void 0,"string"==typeof n.password?n.password:void 0),c&&l&&!o(n,/^content-type0$/i)&&f.setRequestHeader("Content-Type","application/json; charset=utf-8"),"function"==typeof n.deserialize||o(n,/^accept$/i)||f.setRequestHeader("Accept","application/json, text/*"),n.withCredentials&&(f.withCredentials=n.withCredentials),n.timeout&&(f.timeout=n.timeout),n.responseType&&(f.responseType=n.responseType),n.headers)({}).hasOwnProperty.call(n.headers,p)&&f.setRequestHeader(p,n.headers[p]);"function"==typeof n.config&&(f=n.config(f,n)||f),f.onreadystatechange=function(){if(!h&&4===f.readyState)try{var t=f.status>=200&&f.status<300||304===f.status||/^file:\/\//i.test(e),o=f.responseText;if("function"==typeof n.extract)o=n.extract(f,n),t=!0;else if("function"==typeof n.deserialize)o=n.deserialize(o);else try{o=o?JSON.parse(o):null}catch(t){throw new Error("Invalid JSON: "+o)}if(t)i(o);else{var s=new Error(f.responseText);s.code=f.status,s.response=o,r(s)}}catch(t){r(t)}},l&&null!=u?f.send(u):f.send()}),jsonp:r(function(e,n,r,o){var a=n.callbackName||"_mithril_"+Math.round(1e16*Math.random())+"_"+i++,l=t.document.createElement("script");t[a]=function(e){l.parentNode.removeChild(l),r(e),delete t[a]},l.onerror=function(){l.parentNode.removeChild(l),o(new Error("JSONP request failed")),delete t[a]},e=s(e,n.data,!0),l.src=e+(e.indexOf("?")<0?"?":"&")+encodeURIComponent(n.callbackKey||"callback")+"="+encodeURIComponent(a),t.document.documentElement.appendChild(l)}),setCompletionCallback:function(t){n=t}}}(window,c),d=function(t){var i,r=t.document,o={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};function s(t){return t.attrs&&t.attrs.xmlns||o[t.tag]}function a(t,e){if(t.state!==e)throw new Error("`vnode.state` must not be modified")}function l(t){var e=t.state;try{return this.apply(e,arguments)}finally{a(t,e)}}function u(){try{return r.activeElement}catch(t){return null}}function c(t,e,n,i,r,o,s){for(var a=n;a<i;a++){var l=e[a];null!=l&&f(t,l,r,s,o)}}function f(t,e,i,o,a){var u=e.tag;if("string"==typeof u)switch(e.state={},null!=e.attrs&&D(e.attrs,e,i),u){case"#":!function(t,e,n){e.dom=r.createTextNode(e.children),w(t,e.dom,n)}(t,e,a);break;case"<":d(t,e,o,a);break;case"[":!function(t,e,n,i,o){var s=r.createDocumentFragment();if(null!=e.children){var a=e.children;c(s,a,0,a.length,n,null,i)}e.dom=s.firstChild,e.domSize=s.childNodes.length,w(t,s,o)}(t,e,i,o,a);break;default:!function(t,e,i,o,a){var l=e.tag,u=e.attrs,f=u&&u.is,h=(o=s(e)||o)?f?r.createElementNS(o,l,{is:f}):r.createElementNS(o,l):f?r.createElement(l,{is:f}):r.createElement(l);e.dom=h,null!=u&&function(t,e,n){for(var i in e)x(t,i,null,e[i],n)}(e,u,o);if(w(t,h,a),null!=u&&null!=u.contenteditable)b(e);else if(null!=e.text&&(""!==e.text?h.textContent=e.text:e.children=[n("#",void 0,void 0,e.text,void 0,void 0)]),null!=e.children){var d=e.children;c(h,d,0,d.length,i,null,o),"select"===e.tag&&null!=u&&function(t,e){if("value"in e)if(null===e.value)-1!==t.dom.selectedIndex&&(t.dom.value=null);else{var n=""+e.value;t.dom.value===n&&-1!==t.dom.selectedIndex||(t.dom.value=n)}"selectedIndex"in e&&x(t,"selectedIndex",null,e.selectedIndex,void 0)}(e,u)}}(t,e,i,o,a)}else!function(t,e,i,r,o){(function(t,e){var i;if("function"==typeof t.tag.view){if(t.state=Object.create(t.tag),null!=(i=t.state.view).$$reentrantLock$$)return;i.$$reentrantLock$$=!0}else{if(t.state=void 0,null!=(i=t.tag).$$reentrantLock$$)return;i.$$reentrantLock$$=!0,t.state=null!=t.tag.prototype&&"function"==typeof t.tag.prototype.view?new t.tag(t):t.tag(t)}if(D(t.state,t,e),null!=t.attrs&&D(t.attrs,t,e),t.instance=n.normalize(l.call(t.state.view,t)),t.instance===t)throw Error("A view cannot return the vnode it received as argument");i.$$reentrantLock$$=null})(e,i),null!=e.instance?(f(t,e.instance,i,r,o),e.dom=e.instance.dom,e.domSize=null!=e.dom?e.instance.domSize:0):e.domSize=0}(t,e,i,o,a)}var h={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};function d(t,e,n,i){var o=e.children.match(/^\s*?<(\w+)/im)||[],s=r.createElement(h[o[1]]||"div");"http://www.w3.org/2000/svg"===n?(s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+e.children+"</svg>",s=s.firstChild):s.innerHTML=e.children,e.dom=s.firstChild,e.domSize=s.childNodes.length;for(var a,l=r.createDocumentFragment();a=s.firstChild;)l.appendChild(a);w(t,l,i)}function p(t,e,n,i,r,o){if(e!==n&&(null!=e||null!=n))if(null==e||0===e.length)c(t,n,0,n.length,i,r,o);else if(null==n||0===n.length)T(e,0,e.length);else{for(var s=0,a=0,l=null,u=null;a<e.length;a++)if(null!=e[a]){l=null!=e[a].key;break}for(;s<n.length;s++)if(null!=n[s]){u=null!=n[s].key;break}if(null===u&&null==l)return;if(l!==u)T(e,a,e.length),c(t,n,s,n.length,i,r,o);else if(u){for(var h,d,p,b,x,S=e.length-1,C=n.length-1;S>=a&&C>=s;)if(p=e[S],b=n[C],null==p)S--;else if(null==b)C--;else{if(p.key!==b.key)break;p!==b&&v(t,p,b,i,r,o),null!=b.dom&&(r=b.dom),S--,C--}for(;S>=a&&C>=s;)if(h=e[a],d=n[s],null==h)a++;else if(null==d)s++;else{if(h.key!==d.key)break;a++,s++,h!==d&&v(t,h,d,i,y(e,a,r),o)}for(;S>=a&&C>=s;){if(null==h)a++;else if(null==d)s++;else if(null==p)S--;else if(null==b)C--;else{if(s===C)break;if(h.key!==b.key||p.key!==d.key)break;x=y(e,a,r),w(t,g(p),x),p!==d&&v(t,p,d,i,x,o),++s<=--C&&w(t,g(h),r),h!==b&&v(t,h,b,i,r,o),null!=b.dom&&(r=b.dom),a++,S--}p=e[S],b=n[C],h=e[a],d=n[s]}for(;S>=a&&C>=s;){if(null==p)S--;else if(null==b)C--;else{if(p.key!==b.key)break;p!==b&&v(t,p,b,i,r,o),null!=b.dom&&(r=b.dom),S--,C--}p=e[S],b=n[C]}if(s>C)T(e,a,S+1);else if(a>S)c(t,n,s,C+1,i,r,o);else{var A,I,P=r,k=C-s+1,z=new Array(k),N=0,O=0,D=2147483647,_=0;for(O=0;O<k;O++)z[O]=-1;for(O=C;O>=s;O--)if(null==A&&(A=m(e,a,S+1)),null!=(b=n[O])){var R=A[b.key];null!=R&&(D=R<D?R:-1,z[O-s]=R,p=e[R],e[R]=null,p!==b&&v(t,p,b,i,r,o),null!=b.dom&&(r=b.dom),_++)}if(r=P,_!==S-a+1&&T(e,a,S+1),0===_)c(t,n,s,C+1,i,r,o);else if(-1===D)for(N=(I=function(t){var e,n,i=t.slice(),r=[];r.push(0);for(var o=0,s=t.length;o<s;++o)if(-1!==t[o]){var a=r[r.length-1];if(t[a]<t[o])i[o]=a,r.push(o);else{for(e=0,n=r.length-1;e<n;){var l=(e+n)/2|0;t[r[l]]<t[o]?e=l+1:n=l}t[o]<t[r[e]]&&(e>0&&(i[o]=r[e-1]),r[e]=o)}}e=r.length,n=r[e-1];for(;e-- >0;)r[e]=n,n=i[n];return r}(z)).length-1,O=C;O>=s;O--)d=n[O],-1===z[O-s]?f(t,d,i,o,r):I[N]===O-s?N--:w(t,g(d),r),null!=d.dom&&(r=n[O].dom);else for(O=C;O>=s;O--)d=n[O],-1===z[O-s]&&f(t,d,i,o,r),null!=d.dom&&(r=n[O].dom)}}else{var M=e.length<n.length?e.length:n.length;for(s=s<a?s:a;s<M;s++)(h=e[s])===(d=n[s])||null==h&&null==d||(null==h?f(t,d,i,o,y(e,s+1,r)):null==d?E(h):v(t,h,d,i,y(e,s+1,r),o));e.length>M&&T(e,s,e.length),n.length>M&&c(t,n,s,n.length,i,r,o)}}}function v(t,e,i,r,o,a){var u=e.tag;if(u===i.tag){if(i.state=e.state,i.events=e.events,function(t,e){do{if(null!=t.attrs&&"function"==typeof t.attrs.onbeforeupdate){var n=l.call(t.attrs.onbeforeupdate,t,e);if(void 0!==n&&!n)break}if("string"!=typeof t.tag&&"function"==typeof t.state.onbeforeupdate){var n=l.call(t.state.onbeforeupdate,t,e);if(void 0!==n&&!n)break}return!1}while(0);return t.dom=e.dom,t.domSize=e.domSize,t.instance=e.instance,!0}(i,e))return;if("string"==typeof u)switch(null!=i.attrs&&_(i.attrs,i,r),u){case"#":!function(t,e){t.children.toString()!==e.children.toString()&&(t.dom.nodeValue=e.children);e.dom=t.dom}(e,i);break;case"<":!function(t,e,n,i,r){e.children!==n.children?(g(e),d(t,n,i,r)):(n.dom=e.dom,n.domSize=e.domSize)}(t,e,i,a,o);break;case"[":!function(t,e,n,i,r,o){p(t,e.children,n.children,i,r,o);var s=0,a=n.children;if(n.dom=null,null!=a){for(var l=0;l<a.length;l++){var u=a[l];null!=u&&null!=u.dom&&(null==n.dom&&(n.dom=u.dom),s+=u.domSize||1)}1!==s&&(n.domSize=s)}}(t,e,i,r,o,a);break;default:!function(t,e,i,r){var o=e.dom=t.dom;r=s(e)||r,"textarea"===e.tag&&(null==e.attrs&&(e.attrs={}),null!=e.text&&(e.attrs.value=e.text,e.text=void 0));(function(t,e,n,i){if(null!=n)for(var r in n)x(t,r,e&&e[r],n[r],i);var o;if(null!=e)for(var r in e)null==(o=e[r])||null!=n&&null!=n[r]||S(t,r,o,i)})(e,t.attrs,e.attrs,r),null!=e.attrs&&null!=e.attrs.contenteditable?b(e):null!=t.text&&null!=e.text&&""!==e.text?t.text.toString()!==e.text.toString()&&(t.dom.firstChild.nodeValue=e.text):(null!=t.text&&(t.children=[n("#",void 0,void 0,t.text,void 0,t.dom.firstChild)]),null!=e.text&&(e.children=[n("#",void 0,void 0,e.text,void 0,void 0)]),p(o,t.children,e.children,i,null,r))}(e,i,r,a)}else!function(t,e,i,r,o,s){if(i.instance=n.normalize(l.call(i.state.view,i)),i.instance===i)throw Error("A view cannot return the vnode it received as argument");_(i.state,i,r),null!=i.attrs&&_(i.attrs,i,r);null!=i.instance?(null==e.instance?f(t,i.instance,r,s,o):v(t,e.instance,i.instance,r,o,s),i.dom=i.instance.dom,i.domSize=i.instance.domSize):null!=e.instance?(E(e.instance),i.dom=void 0,i.domSize=0):(i.dom=e.dom,i.domSize=e.domSize)}(t,e,i,r,o,a)}else E(e),f(t,i,r,a,o)}function m(t,e,n){for(var i=Object.create(null);e<n;e++){var r=t[e];if(null!=r){var o=r.key;null!=o&&(i[o]=e)}}return i}function g(t){var e=t.domSize;if(null!=e||null==t.dom){var n=r.createDocumentFragment();if(e>0){for(var i=t.dom;--e;)n.appendChild(i.nextSibling);n.insertBefore(i,n.firstChild)}return n}return t.dom}function y(t,e,n){for(;e<t.length;e++)if(null!=t[e]&&null!=t[e].dom)return t[e].dom;return n}function w(t,e,n){null!=n?t.insertBefore(e,n):t.appendChild(e)}function b(t){var e=t.children;if(null!=e&&1===e.length&&"<"===e[0].tag){var n=e[0].children;t.dom.innerHTML!==n&&(t.dom.innerHTML=n)}else if(null!=t.text||null!=e&&0!==e.length)throw new Error("Child node of a contenteditable must be trusted")}function T(t,e,n){for(var i=e;i<n;i++){var r=t[i];null!=r&&E(r)}}function E(t){var e,n=1,i=0,r=t.state;"string"!=typeof t.tag&&"function"==typeof t.state.onbeforeremove&&(null!=(e=l.call(t.state.onbeforeremove,t))&&"function"==typeof e.then&&(n++,e.then(o,o)));t.attrs&&"function"==typeof t.attrs.onbeforeremove&&(null!=(e=l.call(t.attrs.onbeforeremove,t))&&"function"==typeof e.then&&(n++,e.then(o,o)));function o(){if(++i===n&&(a(t,r),function t(e){"string"!=typeof e.tag&&"function"==typeof e.state.onremove&&l.call(e.state.onremove,e);e.attrs&&"function"==typeof e.attrs.onremove&&l.call(e.attrs.onremove,e);if("string"!=typeof e.tag)null!=e.instance&&t(e.instance);else{var n=e.children;if(Array.isArray(n))for(var i=0;i<n.length;i++){var r=n[i];null!=r&&t(r)}}}(t),t.dom)){for(var e=t.dom.parentNode,o=t.domSize||1;--o;)e.removeChild(t.dom.nextSibling);e.removeChild(t.dom)}}o()}function x(t,n,i,o,s){if("key"!==n&&"is"!==n&&null!=o&&!C(n)&&(i!==o||function(t,e){return"value"===e||"checked"===e||"selectedIndex"===e||"selected"===e&&t.dom===u()||"option"===t.tag&&t.dom.parentNode===r.activeElement}(t,n)||"object"===e(o))){if("o"===n[0]&&"n"===n[1])return O(t,n,o);if("xlink:"===n.slice(0,6))t.dom.setAttributeNS("http://www.w3.org/1999/xlink",n.slice(6),o);else if("style"===n)z(t.dom,i,o);else if(A(t,n,s)){if("value"===n){if(("input"===t.tag||"textarea"===t.tag)&&t.dom.value===""+o&&t.dom===u())return;if("select"===t.tag&&null!==i&&t.dom.value===""+o)return;if("option"===t.tag&&null!==i&&t.dom.value===""+o)return}"input"===t.tag&&"type"===n?t.dom.setAttribute(n,o):t.dom[n]=o}else"boolean"==typeof o?o?t.dom.setAttribute(n,""):t.dom.removeAttribute(n):t.dom.setAttribute("className"===n?"class":n,o)}}function S(t,e,n,i){if("key"!==e&&"is"!==e&&null!=n&&!C(e))if("o"!==e[0]||"n"!==e[1]||C(e))if("style"===e)z(t.dom,n,null);else if(!A(t,e,i)||"className"===e||"value"===e&&("option"===t.tag||"select"===t.tag&&-1===t.dom.selectedIndex&&t.dom===u())||"input"===t.tag&&"type"===e){var r=e.indexOf(":");-1!==r&&(e=e.slice(r+1)),!1!==n&&t.dom.removeAttribute("className"===e?"class":e)}else t.dom[e]=null;else O(t,e,void 0)}function C(t){return"oninit"===t||"oncreate"===t||"onupdate"===t||"onremove"===t||"onbeforeremove"===t||"onbeforeupdate"===t}function A(t,e,n){return void 0===n&&(t.tag.indexOf("-")>-1||null!=t.attrs&&t.attrs.is||"href"!==e&&"list"!==e&&"form"!==e&&"width"!==e&&"height"!==e)&&e in t.dom}var I=/[A-Z]/g;function P(t){return"-"+t.toLowerCase()}function k(t){return"-"===t[0]&&"-"===t[1]?t:"cssFloat"===t?"float":t.replace(I,P)}function z(t,n,i){if(n===i);else if(null==i)t.style.cssText="";else if("object"!==e(i))t.style.cssText=i;else if(null==n||"object"!==e(n))for(var r in t.style.cssText="",i){null!=(o=i[r])&&t.style.setProperty(k(r),String(o))}else{for(var r in i){var o;null!=(o=i[r])&&(o=String(o))!==String(n[r])&&t.style.setProperty(k(r),o)}for(var r in n)null!=n[r]&&null==i[r]&&t.style.removeProperty(k(r))}}function N(){}function O(t,n,i){if(null!=t.events){if(t.events[n]===i)return;null==i||"function"!=typeof i&&"object"!==e(i)?(null!=t.events[n]&&t.dom.removeEventListener(n.slice(2),t.events,!1),t.events[n]=void 0):(null==t.events[n]&&t.dom.addEventListener(n.slice(2),t.events,!1),t.events[n]=i)}else null==i||"function"!=typeof i&&"object"!==e(i)||(t.events=new N,t.dom.addEventListener(n.slice(2),t.events,!1),t.events[n]=i)}function D(t,e,n){"function"==typeof t.oninit&&l.call(t.oninit,e),"function"==typeof t.oncreate&&n.push(l.bind(t.oncreate,e))}function _(t,e,n){"function"==typeof t.onupdate&&n.push(l.bind(t.onupdate,e))}return N.prototype=Object.create(null),N.prototype.handleEvent=function(t){var e,n=this["on"+t.type];"function"==typeof n?e=n.call(t.currentTarget,t):"function"==typeof n.handleEvent&&n.handleEvent(t),!1===t.redraw?t.redraw=void 0:"function"==typeof i&&i(),!1===e&&(t.preventDefault(),t.stopPropagation())},{render:function(t,e){if(!t)throw new Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var i=[],r=u(),o=t.namespaceURI;null==t.vnodes&&(t.textContent=""),e=n.normalizeChildren(Array.isArray(e)?e:[e]),p(t,t.vnodes,e,i,null,"http://www.w3.org/1999/xhtml"===o?void 0:o),t.vnodes=e,null!=r&&u()!==r&&"function"==typeof r.focus&&r.focus();for(var s=0;s<i.length;s++)i[s]()},setRedraw:function(t){return i=t}}};var p=function(t,e){var n=d(t),i=[],r=!1;function o(t){var e=i.indexOf(t);e>-1&&i.splice(e,2)}function s(){if(r)throw new Error("Nested m.redraw.sync() call");r=!0;for(var t=1;t<i.length;t+=2)try{i[t]()}catch(t){"undefined"!=typeof console&&console.error(t)}r=!1}var a=(e||function(t){var e=null;return function(){null===e&&(e=requestAnimationFrame(function(){e=null,t()}))}})(s);return a.sync=s,n.setRedraw(a),{subscribe:function(t,e){o(t),i.push(t,e)},unsubscribe:o,redraw:a,render:n.render}}(window);h.setCompletionCallback(p.redraw);var v;u.mount=(v=p,function(t,e){if(null===e)return v.render(t,[]),void v.unsubscribe(t);if(null==e.view&&"function"!=typeof e)throw new Error("m.mount(element, component) expects a component, not a vnode");var i=function(){v.render(t,n(e))};v.subscribe(t,i),i()});var m=c,g=function(t){if(""===t||null==t)return{};"?"===t.charAt(0)&&(t=t.slice(1));for(var e=t.split("&"),n={},i={},r=0;r<e.length;r++){var o=e[r].split("="),s=decodeURIComponent(o[0]),a=2===o.length?decodeURIComponent(o[1]):"";"true"===a?a=!0:"false"===a&&(a=!1);var l=s.split(/\]\[?|\[/),u=n;s.indexOf("[")>-1&&l.pop();for(var c=0;c<l.length;c++){var f=l[c],h=l[c+1],d=""==h||!isNaN(parseInt(h,10)),p=c===l.length-1;if(""===f)null==i[s=l.slice(0,c).join()]&&(i[s]=0),f=i[s]++;null==u[f]&&(u[f]=p?a:d?[]:{}),u=u[f]}}return n},y=function(t){var e,n="function"==typeof t.history.pushState,i="function"==typeof setImmediate?setImmediate:setTimeout;function r(e){var n=t.location[e].replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent);return"pathname"===e&&"/"!==n[0]&&(n="/"+n),n}function o(t,e,n){var i=t.indexOf("?"),r=t.indexOf("#"),o=i>-1?i:r>-1?r:t.length;if(i>-1){var s=r>-1?r:t.length,a=g(t.slice(i+1,s));for(var l in a)e[l]=a[l]}if(r>-1){var u=g(t.slice(r+1));for(var l in u)n[l]=u[l]}return t.slice(0,o)}var s={prefix:"#!",getPath:function(){switch(s.prefix.charAt(0)){case"#":return r("hash").slice(s.prefix.length);case"?":return r("search").slice(s.prefix.length)+r("hash");default:return r("pathname").slice(s.prefix.length)+r("search")+r("hash")}},setPath:function(e,i,r){var a={},l={};if(e=o(e,a,l),null!=i){for(var u in i)a[u]=i[u];e=e.replace(/:([^\/]+)/g,function(t,e){return delete a[e],i[e]})}var c=f(a);c&&(e+="?"+c);var h=f(l);if(h&&(e+="#"+h),n){var d=r?r.state:null,p=r?r.title:null;t.onpopstate(),r&&r.replace?t.history.replaceState(d,p,s.prefix+e):t.history.pushState(d,p,s.prefix+e)}else t.location.href=s.prefix+e}};return s.defineRoutes=function(r,a,l){function u(){var e=s.getPath(),n={},i=o(e,n,n),u=t.history.state;if(null!=u)for(var c in u)n[c]=u[c];for(var f in r){var h=new RegExp("^"+f.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(h.test(i))return void i.replace(h,function(){for(var t=f.match(/:[^\/]+/g)||[],i=[].slice.call(arguments,1,-2),o=0;o<t.length;o++)n[t[o].replace(/:|\./g,"")]=decodeURIComponent(i[o]);a(r[f],n,e,f)})}l(e,n)}var c;n?t.onpopstate=(c=u,function(){null==e&&(e=i(function(){e=null,c()}))}):"#"===s.prefix.charAt(0)&&(t.onhashchange=u),u()},s};u.route=function(t,e){var i,r,o,s,a,l=y(t),u=function(t,u,c){if(null==t)throw new Error("Ensure the DOM element that was passed to `m.route` is not undefined");function f(){null!=i&&e.render(t,i(n(r,o.key,o)))}var h=function(){f(),h=e.redraw};e.subscribe(t,f);var d=function(t){if(t===u)throw new Error("Could not resolve default route "+u);l.setPath(u,null,{replace:!0})};l.defineRoutes(c,function(t,e,n){var l=a=function(t,u){l===a&&(r=null==u||"function"!=typeof u.view&&"function"!=typeof u?"div":u,o=e,s=n,a=null,i=(t.render||function(t){return t}).bind(t),h())};t.view||"function"==typeof t?l({},t):t.onmatch?m.resolve(t.onmatch(e,n)).then(function(e){l(t,e)},d):l(t,"div")},d)};u.set=function(t,e,n){null!=a&&((n=n||{}).replace=!0),a=null,l.setPath(t,e,n)},u.get=function(){return s},u.prefix=function(t){l.prefix=t};var c=function(t,e){e.dom.setAttribute("href",l.prefix+e.attrs.href),e.dom.onclick=function(e){if(!(e.ctrlKey||e.metaKey||e.shiftKey||2===e.which)){e.preventDefault(),e.redraw=!1;var n=this.getAttribute("href");0===n.indexOf(l.prefix)&&(n=n.slice(l.prefix.length)),u.set(n,void 0,t)}}};return u.link=function(t){return null==t.tag?c.bind(c,t):c({},t)},u.param=function(t){return void 0!==o&&void 0!==t?o[t]:o},u}(window,p);var w=d(window);u.render=w.render,u.redraw=p.redraw,u.request=h.request,u.jsonp=h.jsonp,u.parseQueryString=g,u.buildQueryString=f,u.version="2.0.0-rc.4",u.vnode=n,u.PromisePolyfill=c;var b=function(t){var e=t;return function(t){if(void 0===t)return e;e=t}};!function(t,n,i,r){var o,s=["","webkit","Moz","MS","ms","o"],a=n.createElement("div"),l="function",u=Math.round,c=Math.abs,f=Date.now;function h(t,e,n){return setTimeout(w(t,n),e)}function d(t,e,n){return!!Array.isArray(t)&&(p(t,n[e],n),!0)}function p(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==r)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function v(e,n,i){var r="DEPRECATED METHOD: "+n+"\n"+i+" AT \n";return function(){var n=new Error("get-stack-trace"),i=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=t.console&&(t.console.warn||t.console.log);return o&&o.call(t.console,r,i),e.apply(this,arguments)}}o="function"!=typeof Object.assign?function(t){if(t===r||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==r&&null!==i)for(var o in i)i.hasOwnProperty(o)&&(e[o]=i[o])}return e}:Object.assign;var m=v(function(t,e,n){for(var i=Object.keys(e),o=0;o<i.length;)(!n||n&&t[i[o]]===r)&&(t[i[o]]=e[i[o]]),o++;return t},"extend","Use `assign`."),g=v(function(t,e){return m(t,e,!0)},"merge","Use `assign`.");function y(t,e,n){var i,r=e.prototype;(i=t.prototype=Object.create(r)).constructor=t,i._super=r,n&&o(i,n)}function w(t,e){return function(){return t.apply(e,arguments)}}function b(t,n){return e(t)==l?t.apply(n&&n[0]||r,n):t}function T(t,e){return t===r?e:t}function E(t,e,n){p(A(e),function(e){t.addEventListener(e,n,!1)})}function x(t,e,n){p(A(e),function(e){t.removeEventListener(e,n,!1)})}function S(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function C(t,e){return t.indexOf(e)>-1}function A(t){return t.trim().split(/\s+/g)}function I(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function P(t){return Array.prototype.slice.call(t,0)}function k(t,e,n){for(var i=[],r=[],o=0;o<t.length;){var s=e?t[o][e]:t[o];I(r,s)<0&&i.push(t[o]),r[o]=s,o++}return n&&(i=e?i.sort(function(t,n){return t[e]>n[e]}):i.sort()),i}function z(t,e){for(var n,i,o=e[0].toUpperCase()+e.slice(1),a=0;a<s.length;){if((i=(n=s[a])?n+o:e)in t)return i;a++}return r}var N=1;function O(e){var n=e.ownerDocument||e;return n.defaultView||n.parentWindow||t}var D="ontouchstart"in t,_=z(t,"PointerEvent")!==r,R=D&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),M=25,j=1,L=2,X=4,F=8,H=1,Y=2,q=4,$=8,U=16,W=Y|q,V=$|U,B=W|V,G=["x","y"],J=["clientX","clientY"];function Z(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){b(t.options.enable,[t])&&n.handler(e)},this.init()}function K(t,e,n){var i=n.pointers.length,o=n.changedPointers.length,s=e&j&&i-o==0,a=e&(X|F)&&i-o==0;n.isFirst=!!s,n.isFinal=!!a,s&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,i=e.pointers,o=i.length;n.firstInput||(n.firstInput=Q(e));o>1&&!n.firstMultiple?n.firstMultiple=Q(e):1===o&&(n.firstMultiple=!1);var s=n.firstInput,a=n.firstMultiple,l=a?a.center:s.center,u=e.center=tt(i);e.timeStamp=f(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=rt(l,u),e.distance=it(l,u),function(t,e){var n=e.center,i=t.offsetDelta||{},r=t.prevDelta||{},o=t.prevInput||{};e.eventType!==j&&o.eventType!==X||(r=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y});e.deltaX=r.x+(n.x-i.x),e.deltaY=r.y+(n.y-i.y)}(n,e),e.offsetDirection=nt(e.deltaX,e.deltaY);var h=et(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=h.x,e.overallVelocityY=h.y,e.overallVelocity=c(h.x)>c(h.y)?h.x:h.y,e.scale=a?(d=a.pointers,p=i,it(p[0],p[1],J)/it(d[0],d[1],J)):1,e.rotation=a?function(t,e){return rt(e[1],e[0],J)+rt(t[1],t[0],J)}(a.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,i,o,s,a=t.lastInterval||e,l=e.timeStamp-a.timeStamp;if(e.eventType!=F&&(l>M||a.velocity===r)){var u=e.deltaX-a.deltaX,f=e.deltaY-a.deltaY,h=et(l,u,f);i=h.x,o=h.y,n=c(h.x)>c(h.y)?h.x:h.y,s=nt(u,f),t.lastInterval=e}else n=a.velocity,i=a.velocityX,o=a.velocityY,s=a.direction;e.velocity=n,e.velocityX=i,e.velocityY=o,e.direction=s}(n,e);var d,p;var v=t.element;S(e.srcEvent.target,v)&&(v=e.srcEvent.target);e.target=v}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function Q(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:u(t.pointers[n].clientX),clientY:u(t.pointers[n].clientY)},n++;return{timeStamp:f(),pointers:e,center:tt(e),deltaX:t.deltaX,deltaY:t.deltaY}}function tt(t){var e=t.length;if(1===e)return{x:u(t[0].clientX),y:u(t[0].clientY)};for(var n=0,i=0,r=0;r<e;)n+=t[r].clientX,i+=t[r].clientY,r++;return{x:u(n/e),y:u(i/e)}}function et(t,e,n){return{x:e/t||0,y:n/t||0}}function nt(t,e){return t===e?H:c(t)>=c(e)?t<0?Y:q:e<0?$:U}function it(t,e,n){n||(n=G);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return Math.sqrt(i*i+r*r)}function rt(t,e,n){n||(n=G);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return 180*Math.atan2(r,i)/Math.PI}Z.prototype={handler:function(){},init:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(O(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&x(this.element,this.evEl,this.domHandler),this.evTarget&&x(this.target,this.evTarget,this.domHandler),this.evWin&&x(O(this.element),this.evWin,this.domHandler)}};var ot={mousedown:j,mousemove:L,mouseup:X},st="mousedown",at="mousemove mouseup";function lt(){this.evEl=st,this.evWin=at,this.pressed=!1,Z.apply(this,arguments)}y(lt,Z,{handler:function(t){var e=ot[t.type];e&j&&0===t.button&&(this.pressed=!0),e&L&&1!==t.which&&(e=X),this.pressed&&(e&X&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var ut={pointerdown:j,pointermove:L,pointerup:X,pointercancel:F,pointerout:F},ct={2:"touch",3:"pen",4:"mouse",5:"kinect"},ft="pointerdown",ht="pointermove pointerup pointercancel";function dt(){this.evEl=ft,this.evWin=ht,Z.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}t.MSPointerEvent&&!t.PointerEvent&&(ft="MSPointerDown",ht="MSPointerMove MSPointerUp MSPointerCancel"),y(dt,Z,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),r=ut[i],o=ct[t.pointerType]||t.pointerType,s="touch"==o,a=I(e,t.pointerId,"pointerId");r&j&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):r&(X|F)&&(n=!0),a<0||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(a,1))}});var pt={touchstart:j,touchmove:L,touchend:X,touchcancel:F},vt="touchstart",mt="touchstart touchmove touchend touchcancel";function gt(){this.evTarget=vt,this.evWin=mt,this.started=!1,Z.apply(this,arguments)}y(gt,Z,{handler:function(t){var e=pt[t.type];if(e===j&&(this.started=!0),this.started){var n=function(t,e){var n=P(t.touches),i=P(t.changedTouches);e&(X|F)&&(n=k(n.concat(i),"identifier",!0));return[n,i]}.call(this,t,e);e&(X|F)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}}});var yt={touchstart:j,touchmove:L,touchend:X,touchcancel:F},wt="touchstart touchmove touchend touchcancel";function bt(){this.evTarget=wt,this.targetIds={},Z.apply(this,arguments)}y(bt,Z,{handler:function(t){var e=yt[t.type],n=function(t,e){var n=P(t.touches),i=this.targetIds;if(e&(j|L)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,o,s=P(t.changedTouches),a=[],l=this.target;if(o=n.filter(function(t){return S(t.target,l)}),e===j)for(r=0;r<o.length;)i[o[r].identifier]=!0,r++;r=0;for(;r<s.length;)i[s[r].identifier]&&a.push(s[r]),e&(X|F)&&delete i[s[r].identifier],r++;if(!a.length)return;return[k(o.concat(a),"identifier",!0),a]}.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:t})}});var Tt=2500,Et=25;function xt(){Z.apply(this,arguments);var t=w(this.handler,this);this.touch=new bt(this.manager,t),this.mouse=new lt(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function St(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var i=this.lastTouches;setTimeout(function(){var t=i.indexOf(n);t>-1&&i.splice(t,1)},Tt)}}y(xt,Z,{handler:function(t,e,n){var i="touch"==n.pointerType,r="mouse"==n.pointerType;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)(function(t,e){t&j?(this.primaryTouch=e.changedPointers[0].identifier,St.call(this,e)):t&(X|F)&&St.call(this,e)}).call(this,e,n);else if(r&&function(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],o=Math.abs(e-r.x),s=Math.abs(n-r.y);if(o<=Et&&s<=Et)return!0}return!1}.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ct=z(a.style,"touchAction"),At=Ct!==r,It="auto",Pt="manipulation",kt="none",zt="pan-x",Nt="pan-y",Ot=function(){if(!At)return!1;var e={},n=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){e[i]=!n||t.CSS.supports("touch-action",i)}),e}();function Dt(t,e){this.manager=t,this.set(e)}Dt.prototype={set:function(t){"compute"==t&&(t=this.compute()),At&&this.manager.element.style&&Ot[t]&&(this.manager.element.style[Ct]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return p(this.manager.recognizers,function(e){b(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(C(t,kt))return kt;var e=C(t,zt),n=C(t,Nt);if(e&&n)return kt;if(e||n)return e?zt:Nt;if(C(t,Pt))return Pt;return It}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var i=this.actions,r=C(i,kt)&&!Ot[kt],o=C(i,Nt)&&!Ot[Nt],s=C(i,zt)&&!Ot[zt];if(r){var a=1===t.pointers.length,l=t.distance<2,u=t.deltaTime<250;if(a&&l&&u)return}if(!s||!o)return r||o&&n&W||s&&n&V?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var _t=1,Rt=2,Mt=4,jt=8,Lt=jt,Xt=16;function Ft(t){this.options=o({},this.defaults,t||{}),this.id=N++,this.manager=null,this.options.enable=T(this.options.enable,!0),this.state=_t,this.simultaneous={},this.requireFail=[]}function Ht(t){return t&Xt?"cancel":t&jt?"end":t&Mt?"move":t&Rt?"start":""}function Yt(t){return t==U?"down":t==$?"up":t==Y?"left":t==q?"right":""}function qt(t,e){var n=e.manager;return n?n.get(t):t}function $t(){Ft.apply(this,arguments)}function Ut(){$t.apply(this,arguments),this.pX=null,this.pY=null}function Wt(){$t.apply(this,arguments)}function Vt(){Ft.apply(this,arguments),this._timer=null,this._input=null}function Bt(){$t.apply(this,arguments)}function Gt(){$t.apply(this,arguments)}function Jt(){Ft.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Zt(t,e){return(e=e||{}).recognizers=T(e.recognizers,Zt.defaults.preset),new Kt(t,e)}Ft.prototype={defaults:{},set:function(t){return o(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(d(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=qt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return d(t,"dropRecognizeWith",this)?this:(t=qt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(d(t,"requireFailure",this))return this;var e=this.requireFail;return-1===I(e,t=qt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(d(t,"dropRequireFailure",this))return this;t=qt(t,this);var e=I(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function i(n){e.manager.emit(n,t)}n<jt&&i(e.options.event+Ht(n)),i(e.options.event),t.additionalEvent&&i(t.additionalEvent),n>=jt&&i(e.options.event+Ht(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|_t)))return!1;t++}return!0},recognize:function(t){var e=o({},t);if(!b(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(Lt|Xt|32)&&(this.state=_t),this.state=this.process(e),this.state&(Rt|Mt|jt|Xt)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},y($t,Ft,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=e&(Rt|Mt),r=this.attrTest(t);return i&&(n&F||!r)?e|Xt:i||r?n&X?e|jt:e&Rt?e|Mt:Rt:32}}),y(Ut,$t,{defaults:{event:"pan",threshold:10,pointers:1,direction:B},getTouchAction:function(){var t=this.options.direction,e=[];return t&W&&e.push(Nt),t&V&&e.push(zt),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,r=t.direction,o=t.deltaX,s=t.deltaY;return r&e.direction||(e.direction&W?(r=0===o?H:o<0?Y:q,n=o!=this.pX,i=Math.abs(t.deltaX)):(r=0===s?H:s<0?$:U,n=s!=this.pY,i=Math.abs(t.deltaY))),t.direction=r,n&&i>e.threshold&&r&e.direction},attrTest:function(t){return $t.prototype.attrTest.call(this,t)&&(this.state&Rt||!(this.state&Rt)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Yt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),y(Wt,$t,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[kt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&Rt)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),y(Vt,Ft,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[It]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!i||!n||t.eventType&(X|F)&&!r)this.reset();else if(t.eventType&j)this.reset(),this._timer=h(function(){this.state=Lt,this.tryEmit()},e.time,this);else if(t.eventType&X)return Lt;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===Lt&&(t&&t.eventType&X?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))}}),y(Bt,$t,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[kt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&Rt)}}),y(Gt,$t,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:W|V,pointers:1},getTouchAction:function(){return Ut.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(W|V)?e=t.overallVelocity:n&W?e=t.overallVelocityX:n&V&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&c(e)>this.options.velocity&&t.eventType&X},emit:function(t){var e=Yt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),y(Jt,Ft,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Pt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&j&&0===this.count)return this.failTimeout();if(i&&r&&n){if(t.eventType!=X)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||it(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&o?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=h(function(){this.state=Lt,this.tryEmit()},e.interval,this),Rt):Lt}return 32},failTimeout:function(){return this._timer=h(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Lt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Zt.VERSION="2.0.7",Zt.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Bt,{enable:!1}],[Wt,{enable:!1},["rotate"]],[Gt,{direction:W}],[Ut,{direction:W},["swipe"]],[Jt],[Jt,{event:"doubletap",taps:2},["tap"]],[Vt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Kt(t,e){var n;this.options=o({},Zt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(_?dt:R?bt:D?xt:lt))(n,K),this.touchAction=new Dt(this,this.options.touchAction),Qt(this,!0),p(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function Qt(t,e){var n,i=t.element;i.style&&(p(t.options.cssProps,function(r,o){n=z(i.style,o),e?(t.oldCssProps[n]=i.style[n],i.style[n]=r):i.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={}))}Kt.prototype={set:function(t){return o(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var i=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&Lt)&&(r=e.curRecognizer=null);for(var o=0;o<i.length;)n=i[o],2===e.stopped||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(t),!r&&n.state&(Rt|Mt|jt)&&(r=e.curRecognizer=n),o++}},get:function(t){if(t instanceof Ft)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(d(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(d(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=I(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==r&&e!==r){var n=this.handlers;return p(A(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(t!==r){var n=this.handlers;return p(A(t),function(t){e?n[t]&&n[t].splice(I(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var i=n.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<i.length;)i[r](e),r++}},destroy:function(){this.element&&Qt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},o(Zt,{INPUT_START:j,INPUT_MOVE:L,INPUT_END:X,INPUT_CANCEL:F,STATE_POSSIBLE:_t,STATE_BEGAN:Rt,STATE_CHANGED:Mt,STATE_ENDED:jt,STATE_RECOGNIZED:Lt,STATE_CANCELLED:Xt,STATE_FAILED:32,DIRECTION_NONE:H,DIRECTION_LEFT:Y,DIRECTION_RIGHT:q,DIRECTION_UP:$,DIRECTION_DOWN:U,DIRECTION_HORIZONTAL:W,DIRECTION_VERTICAL:V,DIRECTION_ALL:B,Manager:Kt,Input:Z,TouchAction:Dt,TouchInput:bt,MouseInput:lt,PointerEventInput:dt,TouchMouseInput:xt,SingleTouchInput:gt,Recognizer:Ft,AttrRecognizer:$t,Tap:Jt,Pan:Ut,Swipe:Gt,Pinch:Wt,Rotate:Bt,Press:Vt,on:E,off:x,each:p,merge:g,extend:m,assign:o,inherit:y,bindFn:w,prefixed:z}),(void 0!==t?t:"undefined"!=typeof self?self:{}).Hammer=Zt,"function"==typeof define&&define.amd?define(function(){return Zt}):"undefined"!=typeof module&&module.exports?module.exports=Zt:t.Hammer=Zt}(window,document);var T=function(t){var e=t.el,n=t.orientation,i=t.onStart,r=t.onMove,o=t.onEnd,s=new Hammer.Manager(e,{});return s.add(new Hammer.Pan({direction:"vertical"===n?Hammer.DIRECTION_VERTICAL:"all"===n?Hammer.DIRECTION_ALL:Hammer.DIRECTION_HORIZONTAL,threshold:0})),s.on("panstart",i),s.on("panmove",r),s.on("panend",o),{destroy:function(){s.off("panstart",i),s.off("panmove",r),s.off("panend",o)}}},E={slider:"mithril-slider",content:"mithril-slider__content",before:"mithril-slider__before",after:"mithril-slider__after"},x={oninit:function(t){var e=t.attrs,n=b([]);e.pageData&&e.pageData().then(function(t){return p(t)});var i,r=parseInt(e.duration,10)||160,o=b(e.index||-1),s=0,a=b(e.groupBy||1),l=e.cancelDragFactor||.2,c="vertical"===e.orientation,f=e.rtl?-1:1,h=e.pageOffsetX||0,d=e.pageOffsetY||0,p=function(t){n(t),u.redraw()},v=function(t,e){return t.childNodes[e]},m=function(t,e){var n=t.style;n.transform=n["-webkit-transform"]=n["-moz-transform"]=n["-ms-transform"]=function(t){return"translate3d("+[c?"0":t+"px",c?t+"px":"0","0"].join(", ")+")"}(e)},g=function(t){i.style["-webkit-transition-duration"]=i.style["transition-duration"]=t+"ms"},y=function(t,r){t<0||t>n().length-1||(T(i),void 0!==r&&g(r),m(i,-f*t*s),function(t){if(o()!==t&&(o(t),u.redraw(),e.getState)){var n=v(i,o());e.getState({index:t,hasNext:C(),hasPrevious:A(),pageEl:n})}}(t))},w=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=o(),i=a(),r=n().length,s=e+t*i;return s+i>r?r-i:s<0?0:s},T=function(t){var e=c?"height":"width",i=t.childNodes[0];i.getBoundingClientRect()[e]&&(s=i.getBoundingClientRect()[e],t.style[e]=n().length*s+"px")},E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;T(i),g(t),y(w())},x=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return g(t),o()<n().length?y(w(1)):y(w())},S=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return g(t),o()>0?y(w(-1)):y(w())},C=function(){return o()+a()<n().length},A=function(){return o()>0};Object.assign(t.state,{list:n,contentEl:i,setContentEl:function(t){i=t,T(t),E()},handleDrag:function(t){var e=i,n=v(e,o()),r=c?t.deltaY+d:t.deltaX+h,s=c?n.offsetTop:-1===f?n.offsetLeft-n.parentNode.clientWidth+n.clientWidth:n.offsetLeft;m(e,r-s),t.preventDefault()},handleDragStart:function(){return T(i),g(0)},handleDragEnd:function(t){var e=function(t){var e=v(i,o()).clientWidth,n=1/(Math.abs(t)||1)*e;return n>r&&(n=r),n}(t.velocity),n=c?t.deltaY:t.deltaX;Math.abs(n)>s*a()*l?f*n<0?x(e):S(e):E(e)},groupBy:a,updateContentSize:T,index:o,hasNext:C,hasPrevious:A,goTo:y,goCurrent:E,goNext:x,goPrevious:S})},view:function(t){var e=t.state,n=t.attrs;n.sliderController&&n.sliderController(e);var i=e.index();e.groupBy(n.groupBy||1);var r=e.contentEl;return r&&e.updateContentSize(r),u("div",{class:[E.slider,n.class||""].join(" ")},[n.before?u("."+E.before,n.before):null,u("div",{class:E.content,onupdate:function(t){var i=t.dom;e.inited||i.childNodes.length>0&&(e.setContentEl(i),e.updateContentSize(i),e.touch=new T({el:i,orientation:n.orientation,onStart:e.handleDragStart,onMove:e.handleDrag,onEnd:e.handleDragEnd}),e.inited=!0)},onremove:function(){return e.touch&&e.touch.destroy()}},e.list().map(function(t,e){return n.page({data:t,listIndex:e,currentIndex:i})})),n.after?u("."+E.after,n.after):null])}};t.slider=x,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=mithril-slider.js.map
