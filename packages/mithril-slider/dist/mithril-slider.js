!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("mithril"),require("hammerjs")):"function"==typeof define&&define.amd?define(["exports","mithril","hammerjs"],e):e(t["mithril-slider"]=t["mithril-slider"]||{},t.m)}(this,function(t,e){"use strict";e="default"in e?e.default:e;var n=function(t){var e=t;return function(t){if(void 0===t)return e;e=t}},r=function(t){var e=t.el,n=t.orientation,r=t.onStart,i=t.onMove,o=t.onEnd,a=new Hammer.Manager(e,{});return a.add(new Hammer.Pan({direction:"vertical"===n?Hammer.DIRECTION_VERTICAL:"all"===n?Hammer.DIRECTION_ALL:Hammer.DIRECTION_HORIZONTAL,threshold:0})),a.on("panstart",r),a.on("panmove",i),a.on("panend",o),{destroy:function(){a.off("panstart",r),a.off("panmove",i),a.off("panend",o)}}},i={slider:"mithril-slider",content:"mithril-slider__content",before:"mithril-slider__before",after:"mithril-slider__after"},o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a={oninit:function(t){var r=t.attrs,i=n([]);r.pageData&&r.pageData().then(function(t){return m(t)});var a=parseInt(r.duration,10)||160,l=n(r.index||-1),d=void 0,u=0,s=n(r.groupBy||1),f=r.cancelDragFactor||.2,c="vertical"===r.orientation,h=r.rtl?-1:1,v=r.pageOffsetX||0,g=r.pageOffsetY||0,m=function(t){i(t),e.redraw()},p=function(t){if(l()!==t&&(l(t),e.redraw(),r.getState)){var n=y(d,l());r.getState({index:t,hasNext:O(),hasPrevious:S(),pageEl:n})}},y=function(t,e){return t.childNodes[e]},x=function(t){return"translate3d("+[c?"0":t+"px",c?t+"px":"0","0"].join(", ")+")"},C=function(t,e){var n=t.style;n.transform=n["-webkit-transform"]=n["-moz-transform"]=n["-ms-transform"]=x(e)},b=function(t){d.style["-webkit-transition-duration"]=d.style["transition-duration"]=t+"ms"},D=function(t,e){t<0||t>i().length-1||(_(d),void 0!==e&&b(e),C(d,-h*t*u),p(t))},E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=l(),n=s(),r=i().length,o=e+t*n;return o+n>r?r-n:o<0?0:o},_=function(t){var e=c?"height":"width",n=t.childNodes[0];n.getBoundingClientRect()[e]&&(u=n.getBoundingClientRect()[e],t.style[e]=i().length*u+"px")},w=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;_(d),b(t),D(E())},I=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;return b(t),D(l()<i().length?E(1):E())},N=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;return b(t),D(l()>0?E(-1):E())},O=function(){return l()+s()<i().length},S=function(){return l()>0},j=function(t){d=t,_(t),w()},T=function(){return _(d),b(0)},P=function(t){var e=d,n=y(e,l()),r=c?t.deltaY+g:t.deltaX+v,i=c?n.offsetTop:-1===h?n.offsetLeft-n.parentNode.clientWidth+n.clientWidth:n.offsetLeft;C(e,r-i),t.preventDefault()},R=function(t){var e=y(d,l()).clientWidth,n=1/(Math.abs(t)||1)*e;return n>a&&(n=a),n},B=function(t){var e=R(t.velocity),n=c?t.deltaY:t.deltaX;Math.abs(n)>u*s()*f?h*n<0?I(e):N(e):w(e)};o(t.state,{list:i,contentEl:d,setContentEl:j,handleDrag:P,handleDragStart:T,handleDragEnd:B,groupBy:s,updateContentSize:_,index:l,hasNext:O,hasPrevious:S,goTo:D,goCurrent:w,goNext:I,goPrevious:N})},view:function(t){var n=t.state,o=t.attrs;o.sliderController&&o.sliderController(n);var a=n.index();n.groupBy(o.groupBy||1);var l=n.contentEl;return l&&n.updateContentSize(l),e("div",{class:[i.slider,o.class||""].join(" ")},[o.before?e("."+i.before,o.before):null,e("div",{class:i.content,onupdate:function(t){var e=t.dom;n.inited||e.childNodes.length>0&&(n.setContentEl(e),n.updateContentSize(e),n.touch=new r({el:e,orientation:o.orientation,onStart:n.handleDragStart,onMove:n.handleDrag,onEnd:n.handleDragEnd}),n.inited=!0)},onremove:function(){return n.touch&&n.touch.destroy()}},n.list().map(function(t,e){return o.page({data:t,listIndex:e,currentIndex:a})})),o.after?e("."+i.after,o.after):null])}},l=[{".mithril-slider":{overflow:"hidden"," .mithril-slider__content":{transitionProperty:"transform",transitionTimingFunction:"ease-out",transform:"translate3d(0, 0, 0)"}}}];t.slider=a,t.css=l,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=mithril-slider.js.map
