!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("mithril"),require("hammerjs"),require("j2c-plugin-prefix-browser"),require("j2c")):"function"==typeof define&&define.amd?define(["mithril","hammerjs","j2c-plugin-prefix-browser","j2c"],t):e["mithril-slider"]=t(e.m,e.hammerjs,e["j2c-plugin-prefix-browser"],e.j2c)}(this,function(e,t,n,r){"use strict";e="default"in e?e.default:e,t="default"in t?t.default:t,r="default"in r?r.default:r;var o={slider:"slider",content:"content",before:"before",after:"after"},i=new r(n.prefixPlugin),a=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];l(e);var o=document.createElement("style");e&&o.setAttribute("id",e),n.forEach(function(e){Object.keys(e).length&&e.forEach(function(e){var t={"@global":e},n=i.sheet(t);o.appendChild(document.createTextNode(n))})}),document.head.appendChild(o)},l=function(e){if(e){var t=document.getElementById(e);t&&t.parentNode.removeChild(t)}},d=[{".slider":{overflow:"hidden"," .content":{transitionProperty:"transform",transitionTimingFunction:"ease-out",transform:"translate3d(0, 0, 0)"}}}];a("mithril-slider",d);var u=function(n,r){r.sliderController&&r.sliderController(n);var i=n.index();n.groupBy(r.groupBy||1);var a=n.contentEl();return a&&n.updateContentSize(a),e("div",{class:[o.slider,r.class||""].join(" ")},[r.before?e("."+o.before,r.before):null,e("div",{class:o.content,config:function(e,o,i){i.inited||e.childNodes.length>0&&!function(){n.setContentEl(e),n.updateContentSize(e);var o=new t.Manager(e,{});o.add(new t.Pan({direction:"vertical"===r.orientation?t.DIRECTION_VERTICAL:"all"===r.orientation?t.DIRECTION_ALL:t.DIRECTION_HORIZONTAL,threshold:0})),o.on("panmove",n.handleDrag),o.on("panend",n.handleDragEnd),o.on("panstart",n.handleDragStart),i.onunload=function(){o.off("panmove",n.handleDrag),o.off("panend",n.handleDragEnd),o.off("panstart",n.handleDragStart)},i.inited=!0}()}},n.list().map(function(e,t){return r.page({data:e,listIndex:t,currentIndex:i})})),r.after?e("."+o.after,r.after):null])},f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.prop([]);t.pageData&&t.pageData().then(function(e){return h(e)});var r=parseInt(t.duration,10)||160,o=e.prop(t.index||-1),i=e.prop(),a=0,l=e.prop(t.groupBy||1),d=t.cancelDragFactor||.2,u="vertical"===t.orientation,f=t.rtl?-1:1,c=t.pageOffsetX||0,s=t.pageOffsetY||0,h=function(t){n(t),e.redraw()},g=function(n){var r=o();if(r!==n&&(o(n),e.redraw(),t.getState)){var a=i(),l=p(a,o());t.getState({index:n,hasNext:w(),hasPrevious:N(),pageEl:l})}},p=function(e,t){return e.childNodes[t]},v=function(e){var t=u?"0":e+"px",n=u?e+"px":"0",r="0",o=[t,n,r].join(", ");return"translate3d("+o+")"},m=function(e,t){var n=e.style;n.transform=n["-webkit-transform"]=n["-moz-transform"]=n["-ms-transform"]=v(t)},x=function(e){i().style["-webkit-transition-duration"]=i().style["transition-duration"]=e+"ms"},y=function(e,t){e<0||e>n().length-1||(b(i()),void 0!==t&&x(t),m(i(),-f*e*a),g(e))},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=o(),r=l(),i=0,a=n().length,d=t+e*r;return d+r>a?a-r:d<i?i:d},b=function(e){var t=u?"height":"width",r=e.childNodes[0];r.getBoundingClientRect()[t]&&(a=r.getBoundingClientRect()[t],e.style[t]=n().length*a+"px")},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;b(i()),x(e),y(C())},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return x(e),y(o()<n().length?C(1):C())},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return x(e),y(o()>0?C(-1):C())},w=function(){return o()+l()<n().length},N=function(){return o()>0},I=function(e){i(e),b(e),D()},T=function(){return b(i()),x(0)},O=function(e){var t=i(),n=p(t,o()),r=u?e.deltaY+s:e.deltaX+c,a=u?n.offsetTop:f===-1?n.offsetLeft-n.parentNode.clientWidth+n.clientWidth:n.offsetLeft;m(t,r-a),e.preventDefault()},S=function(e){var t=i(),n=p(t,o()),a=n.clientWidth,l=Math.abs(e)||1,d=1/l*a;return d>r&&(d=r),d},B=function(e){var t=S(e.velocity),n=u?e.deltaY:e.deltaX;Math.abs(n)>a*l()*d?f*n<0?E(t):j(t):D(t)};return{list:n,contentEl:i,setContentEl:I,handleDrag:O,handleDragStart:T,handleDragEnd:B,groupBy:l,updateContentSize:b,index:o,hasNext:w,hasPrevious:N,goTo:y,goCurrent:D,goNext:E,goPrevious:j}},c={controller:f,view:u};return c});
//# sourceMappingURL=mithril-slider.js.map
